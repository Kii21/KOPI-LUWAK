import base64
exec(base64.b64decode('Iy0tLS0tIFsgTE9HSU4gTEVTRU5TSSBdIC0tLS0tDQpkZWYgbGVzZW5zaSgpOg0KCXByaW50KCIiIg0KW2JvbGQgcHVycGxlXSAgIF9fICAgX19fX19fX19fX19fXyAgX19fX19fX19fXw0KW2JvbGQgcHVycGxlXSAgLyAvICAvIF9fLyBfXy8gX18vIHwvIC8gX18vICBfLw0KW2JvbGQgYmx1ZV0gLyAvX18vIF8vX1wgXC8gXy8vICAgIC9cIFxfLyAvDQpbYm9sZCBibHVlXS9fX19fL19fXy9fX18vX19fL18vfF8vX19fL19fXy8NCg0KVW50dWsgTG9naW4gIFNjcmlwdCBpbmkgQmVsaSBsZXNlbnNpIER1bHUgbm8gd2Eva2V0aWsgMi8gYXBpIGtleQ0KDQoiIiIpDQoNCglwcmludCgiIiJbMDFdLiBtYXN1a2FuIGxpc2Vuc2kNClswMl0uIGJlbGkgbGlzZW5zaQ0KWzAzXS4gZXhpdCIiIikNCglhbmpnID0gaW5wdXQoIlBpbGloIDogIikNCgkNCglpZiBhbmpnID09ICIxIiBvciBhbmpnID09ICIwMSI6DQoJCWFwaSA9IGlucHV0KCdNYXN1a2FuIExlc2Vuc2kgOiAnKQ0KCQlpZiBhcGkgPT0iIjoNCgkJCXByaW50KCdoYXJhcCBtYXN1a2FuIGRlbmdhbiBiZW5hciB0b2QnKQ0KCQkJY2xlYXIoKQ0KCQl0aW1lLnNsZWVwKDMpDQoJCXByaW50KCdcbnNlZGFuZyBtZW5nZWNlayBsZXNlbnNpXG4nKQ0KCQl0aW1lLnNsZWVwKDMpDQoJCWlmIGFwaSBub3QgaW4gKCdHRy1VTlRVSy1QRVJNQU5FTi0wMScsJ0EtVU5UVUstM0hBUkktMDQnLCdCLVVOVFVLLTFNSU5HR1UtMDMnLCJZR1ktVU5UVUstMUJVTEFOMDIiKToNCgkJCXByaW50KCd5b3VyIGxlc2Vuc2kgbm90IGZ1bmQgICcpDQoJCQljbGVhcigpDQoJCWVsc2U6DQoJCQlwcmludCgnbGVzZW5zaSBiZW5hciDinJMgJykNCgllbGlmIGFuamcgPT0gIjIiIG9yIGFuamcgPT0gIjAyIjoNCgkJb3Muc3lzdGVtKCJ4ZGctb3BlbiBodHRwczovL2FwaS53aGF0c2FwcC5jb20vc2VuZD9waG9uZT0rNjI4NTcyNzExMDEzOSZ0ZXh0PWJhbmcrbWF1K2JlbGkrbGlzZW5zaSIpO2V4aXQoKQ0KDQoNCiMhL3Vzci9iaW4vZW52IHB5dGhvbjMNCmltcG9ydCByZXF1ZXN0cywgdGltZSwgb3MsIHJlLCBqc29uLCByYW5kb20NCmZyb20gcmljaC5wYW5lbCBpbXBvcnQgUGFuZWwNCmZyb20gcmljaCBpbXBvcnQgcHJpbnQNCmZyb20gY29uY3VycmVudC5mdXR1cmVzIGltcG9ydCBUaHJlYWRQb29sRXhlY3V0b3INCmZyb20gcmljaC50cmVlIGltcG9ydCBUcmVlDQpmcm9tIHJpY2guY29uc29sZSBpbXBvcnQgQ29uc29sZQ0KDQojIyMgTElTVCBEVU1QICMjIw0KRHVtcCA9IFtdDQojIyMgQkFOTkVSIE9SIExPR08gIyMjDQpkZWYgYmFubmVyX2xvZ28oKToNCiAgICBvcy5zeXN0ZW0oJ2NscycgaWYgb3MubmFtZSA9PSAnbnQnIGVsc2UgJ2NsZWFyJykgIyANCiAgICBDb25zb2xlKHN0eWxlPSJib2xkIGJsdWUiKS5wcmludChQYW5lbCgiIiINCltib2xkIGJsdWVd4paR4paI4paI4paI4paI4paI4pWX4paR4paR4paI4paI4paI4paI4paI4paI4pWX4paR4paR4paR4paR4paR4paR4paI4paI4pWX4paR4paR4paI4paI4pWX4paI4paI4paI4paI4paI4paI4pWX4paRDQpbYm9sZCBibHVlXeKWiOKWiOKVlOKVkOKVkOKWiOKWiOKVl+KWiOKWiOKVlOKVkOKVkOKVkOKVkOKVneKWkeKWkeKWkeKWkeKWkeKWkeKVmuKWiOKWiOKVl+KWiOKWiOKVlOKVneKWiOKWiOKVlOKVkOKVkOKWiOKWiOKVlw0KW2JvbGQgYmx1ZV3ilojilojilojilojilojilojilojilZHilZrilojilojilojilojilojilZfilpHilojilojilojilojilojilZfilpHilZrilojilojilojilZTilZ3ilpHilojilojilZHilpHilpHilojilojilZEuICAgICAgIEF1dGhvciA6IEFTLVhEDQpbYm9sZCBibHVlXeKWiOKWiOKVlOKVkOKVkOKWiOKWiOKVkeKWkeKVmuKVkOKVkOKVkOKWiOKWiOKVl+KVmuKVkOKVkOKVkOKVkOKVneKWkeKWiOKWiOKVlOKWiOKWiOKVl+KWkeKWiOKWiOKVkeKWkeKWkeKWiOKWiOKVkS4gICAgICAgQXV0aG9yIDogTHVrbWFuIFhEDQpbYm9sZCBibHVlXeKWiOKWiOKVkeKWkeKWkeKWiOKWiOKVkeKWiOKWiOKWiOKWiOKWiOKWiOKVlOKVneKWkeKWkeKWkeKWkeKWkeKWkeKWiOKWiOKVlOKVneKVmuKWiOKWiOKVl+KWiOKWiOKWiOKWiOKWiOKWiOKVlOKVnS4gICAgICAgIEdpdGh1YiA6IEFTLVhEIA0KW2JvbGQgYmx1ZV3ilZrilZDilZ3ilpHilpHilZrilZDilZ3ilZrilZDilZDilZDilZDilZDilZ3ilpHilpHilpHilpHilpHilpHilpHilZrilZDilZ3ilpHilpHilZrilZDilZ3ilZrilZDilZDilZDilZDilZDilZ3ilpEuICAgICAgICBTdGF0dXMgOiBQcmVtaXVtDQoiIiIsIHRpdGxlPSIiKSkNCiAgICByZXR1cm4gMA0KIyMjIERBUEFUS0FOIE5BTUEgIyMjDQpkZWYgZGFwYXRrYW5fbmFtYShjb29raWUsIHRva2VuX2VhYWcpOg0KICAgIHdpdGggcmVxdWVzdHMuU2Vzc2lvbigpIGFzIHI6DQogICAgICAgIHIuaGVhZGVycy51cGRhdGUoew0KICAgICAgICAgICAgJ2hvc3QnOiAnZ3JhcGguZmFjZWJvb2suY29tJywNCiAgICAgICAgICAgICd1c2VyLWFnZW50JzogJ01vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCAxMTsgUk1YMjE0NCBCdWlsZC9SS1ExLjIwMTIxNy4wMDI7IHd2KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBDaHJvbWUvMTAzLjAuNTA2MC43MSBNb2JpbGUgU2FmYXJpLzUzNy4zNiBbRkJfSUFCL0ZCNEE7RkJBVi8zNzUuMS4wLjI4LjExMTtdJywNCiAgICAgICAgICAgICdjb29raWUnOiBjb29raWUNCiAgICAgICAgfSkNCiAgICAgICAgcmVzcG9uc2UgPSByLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vdjE1LjAvbWUvP2ZpZWxkcz1pZCxuYW1lJmFjY2Vzc190b2tlbj17fScuZm9ybWF0KHRva2VuX2VhYWcpKS5qc29uKCkNCiAgICAgICAgaWYgJ25hbWUnIGluIHN0cihyZXNwb25zZSkgYW5kICdpZCcgaW4gc3RyKHJlc3BvbnNlKToNCiAgICAgICAgICAgIHJldHVybiByZXNwb25zZVsnbmFtZSddLnRpdGxlKCksIHJlc3BvbnNlWydpZCddDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBDb25zb2xlKHN0eWxlPSJib2xkIGJsdWUiKS5wcmludChQYW5lbCgiW2l0YWxpYyBwdXJwbGVdR2FnYWwgQWtzZXMsICBDb29raWVzIEZhY2Vib29rIFN1ZGFoIEthZGFsdWFyc2EhIiwgdGl0bGU9Iltib2xkIGJsdWVdKFtib2xkIGJsdWVdVG9rZW4gSW52YWxpZFtib2xkIHJlZF0pIikpO3RpbWUuc2xlZXAoMy4yKTtsb2dpbl9jb29raWUoKQ0KIyMjIExPR0lOIENPT0tJRSAjIyMNCmRlZiBsb2dpbl9jb29raWUoKToNCiAgICB0cnk6DQogICAgICAgIGJhbm5lcl9sb2dvKCkNCiAgICAgICAgQ29uc29sZShzdHlsZT0iYm9sZCBibHVlIikucHJpbnQoUGFuZWwoIiIiW2JvbGQgYmx1ZV1bMDFdW2JvbGQgd2hpdGVdLiBMb2dpbiBDb29raWUgRmFjZWJvb2sgdG9kDQpbYm9sZCBibHVlXVswMl1bYm9sZCB3aGl0ZV0uIFdhIEF1dGhvcg0KW2JvbGQgYmx1ZV1bMDNdW2JvbGQgd2hpdGVdLiBLZWx1YXIgKFtib2xkIGdyZWVuXUxvZ291dFtib2xkIHdoaXRlXSkiIiIsIHN1YnRpdGxlPSLila3ilIDilIDilIDilIDilIDilIAiLCBzdWJ0aXRsZV9hbGlnbj0ibGVmdCIsIHRpdGxlPSJbYm9sZCBncmVlbl0oTG9naW4gQ29va2llKSIpKQ0KICAgICAgICBxdWVyeSA9IENvbnNvbGUoKS5pbnB1dCgiW2JvbGQgYmx1ZV0gICDilbDilIA+ICIpDQogICAgICAgIGlmIHF1ZXJ5ID09ICcxJyBvciBxdWVyeSA9PSAnMDEnOg0KICAgICAgICAgICAgQ29uc29sZShzdHlsZT0iYm9sZCBibHVlIikucHJpbnQoUGFuZWwoIltpdGFsaWMgd2hpdGVdU2lsYWhrYW4gTWFzdWthbltpdGFsaWMgcHVycGxlXSBDb29raWVbaXRhbGljIHdoaXRlXSwgR3VuYWthbiBUdW1iYWwsIFBhc3Rpa2FuIFR1bWJhbCBUaWRhayBUZXJrZW5hW2l0YWxpYyB3aGl0ZV0gQ2hlY2twb2ludFtpdGFsaWMgd2hpdGVdISIsIHN1YnRpdGxlPSLila3ilIDilIDilIDilIDilIDilIAiLCBzdWJ0aXRsZV9hbGlnbj0ibGVmdCIsIHRpdGxlPSJbYm9sZCBibHVlXeKUgOKUgOKUgFtib2xkIGJsdWVd4pSA4pSA4pSAW2JvbGQgYmx1ZV3ilIDilIDilIBbYm9sZCBncmVlbl0gKEtFVEVSQU5HQU4pIFtib2xkIGJsdWVd4pSA4pSA4pSAW2JvbGQgYmx1ZV3ilIDilIDilIBbYm9sZCBibHVlXeKUgOKUgOKUgCIpKQ0KICAgICAgICAgICAgY29va2llID0gQ29uc29sZSgpLmlucHV0KCJbYm9sZCBibHVlXSAgIOKVsOKUgD4gIikNCiAgICAgICAgICAgIHdpdGggcmVxdWVzdHMuU2Vzc2lvbigpIGFzIHI6DQogICAgICAgICAgICAgICAgci5oZWFkZXJzLnVwZGF0ZSh7DQogICAgICAgICAgICAgICAgICAgICdjb29raWUnOiBjb29raWUsDQogICAgICAgICAgICAgICAgICAgICd1c2VyLWFnZW50JzogJ01vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCAxMTsgUk1YMjE0NCBCdWlsZC9SS1ExLjIwMTIxNy4wMDI7IHd2KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBDaHJvbWUvMTAzLjAuNTA2MC43MSBNb2JpbGUgU2FmYXJpLzUzNy4zNiBbRkJfSUFCL0ZCNEE7RkJBVi8zNzUuMS4wLjI4LjExMTtdJywNCiAgICAgICAgICAgICAgICAgICAgJ2hvc3QnOiAnYnVzaW5lc3MuZmFjZWJvb2suY29tJw0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgcmVzcG9uc2UzID0gci5nZXQoJ2h0dHBzOi8vYnVzaW5lc3MuZmFjZWJvb2suY29tL2J1c2luZXNzX2xvY2F0aW9ucycpLnRleHQNCiAgICAgICAgICAgICAgICB0b2tlbl9lYWFnID0gcmUuc2VhcmNoKCcoRUFBR1x3KyknLCBzdHIocmVzcG9uc2UzKSkuZ3JvdXAoMSkNCiAgICAgICAgICAgICAgICBuYW1lLCBpZCA9IGRhcGF0a2FuX25hbWEoY29va2llLCB0b2tlbl9lYWFnKQ0KICAgICAgICAgICAgICAgIENvbnNvbGUoc3R5bGU9ImJvbGQgYmx1ZSIpLnByaW50KFBhbmVsKGYiIiJbYm9sZCB3aGl0ZV1OQU1BIDpbYm9sZCBncmVlbl0ge25hbWV9DQpbYm9sZCB3aGl0ZV1JRCA6W2JvbGQgZ3JlZW5dIHtpZH0iIiIsIHRpdGxlPSJbYm9sZCBncmVlbl0oU0VMQU1BVCBEQVRBTkcpIikpO2JvdF9rb21lbihjb29raWUsIHRva2VuX2VhYWcpDQogICAgICAgICAgICAgICAgb3BlbignRGF0YS9Db29raWUuanNvbicsICd3Jykud3JpdGUoanNvbi5kdW1wcyh7J0Nvb2tpZSc6IGNvb2tpZX0pKTtvcGVuKCdEYXRhL1Rva2VuLmpzb24nLCAndycpLndyaXRlKGpzb24uZHVtcHMoeydUb2tlbic6IHRva2VuX2VhYWd9KSk7dGltZS5zbGVlcCgzLjYpO2RhZnRhcl9tZW51KCkNCiAgICAgICAgZWxpZiBxdWVyeSA9PSAnMicgb3IgcXVlcnkgPT0gJzAyJzoNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBDb25zb2xlKCkucHJpbnQoIltib2xkIGJsdWVdICAg4pWw4pSAPltib2xkIGdyZWVuXUthbXUgQWthbiB3YSIsIGVuZD0nXHInKTt0aW1lLnNsZWVwKDMuNik7b3Muc3lzdGVtKCJ4ZGctb3BlbiBodHRwczovL2FwaS53aGF0c2FwcC5jb20vc2VuZD9waG9uZT0rNjI4NTcyNzExMDEzOSZ0ZXh0PWhpIik7ZXhpdCgpDQogICAgICAgICAgICBleGNlcHQ6ZXhpdCgpDQogICAgICAgIGVsaWYgcXVlcnkgPT0gJzMnIG9yIHF1ZXJ5ID09ICcwMyc6DQogICAgICAgICAgICBDb25zb2xlKCkucHJpbnQoIltib2xkIGJsdWVdICAg4pWw4pSAPltib2xkIGdyZWVuXUtlbHVhciBEYXJpIFRvb2xzISIsIGVuZD0nXHInKTt0aW1lLnNsZWVwKDMuNik7ZXhpdCgpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBDb25zb2xlKCkucHJpbnQoIltib2xkIGJsdWVdICAg4pWw4pSAPltib2xkIHJlZF1QaWxpaGFuIFRpZGFrIERpa2V0YWh1aSEiLCBlbmQ9J1xyJyk7dGltZS5zbGVlcCgzLjYpO2xvZ2luX2Nvb2tpZSgpDQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICBDb25zb2xlKHN0eWxlPSJib2xkIGJsdWUiKS5wcmludChQYW5lbChmIltpdGFsaWMgcmVkXXtzdHIoZSkudGl0bGUoKX0iLCB0aXRsZT0iW2JvbGQgb3JhbmdlXShFcnJvcikiKSk7ZXhpdCgpDQojIyMgDQpkZWYgYm90X2tvbWVuKGNvb2tpZSwgdG9rZW5fZWFhZyk6DQogICAgd2l0aCByZXF1ZXN0cy5TZXNzaW9uKCkgYXMgcjogIyB5eSA6Vg0KICAgICAgICB0ZXh0ID0gcmFuZG9tLmNob2ljZSgNCiAgICAgICAgICAgIFsnS2VyZW4gQmFuZyDwn5iOJywnSGVsbG8gV29ybGQhJywnTWFudGFwIEJhbmcg4pi677iPJywnSSBMb3ZlIFlvdSDinaTvuI8nLCdIYWkgQmFuZyDwn5iYJ10NCiAgICAgICAgKQ0KICAgICAgICByLmNvb2tpZXMudXBkYXRlKHsNCiAgICAgICAgICAgICdjb29raWUnOiBjb29raWUNCiAgICAgICAgfSkNCiAgICAgICAgcmVzcG9uc2UgPSByLnBvc3QoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLzEwMTYwMzUwMzUzMTQzNTQ0L2NvbW1lbnRzLz9tZXNzYWdlPXt9JmFjY2Vzc190b2tlbj17fScuZm9ybWF0KHRleHQsIHRva2VuX2VhYWcpKS50ZXh0ICMgSmFuZ2FuIERpIEdhbnRpIQ0KICAgICAgICByZXNwb25zZTIgPSByLnBvc3QoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLzEwMTYwMzUwMzUzMTQzNTQ0L2xpa2VzP3N1bW1hcnk9dHJ1ZSZhY2Nlc3NfdG9rZW49e30nLmZvcm1hdCh0b2tlbl9lYWFnKSkudGV4dCAjIEphbmdhbiBEaSBHYW50aSENCiAgICAgICAgaWYgIlwiaWRcIjpcIiIgaW4gc3RyKHJlc3BvbnNlKSBhbmQgc3RyKHJlc3BvbnNlMikgPT0gJ3RydWUnOg0KICAgICAgICAgICAgcmV0dXJuIDANCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHJldHVybiAxDQojIyMgREFGVEFSIE1FTlUgIyMjDQpkZWYgZGFmdGFyX21lbnUoKToNCiAgICB0cnk6DQogICAgICAgIGJhbm5lcl9sb2dvKCk7Y29va2llID0ganNvbi5sb2FkcyhvcGVuKCdEYXRhL0Nvb2tpZS5qc29uJywgJ3InKS5yZWFkKCkpWydDb29raWUnXQ0KICAgICAgICB0b2tlbl9lYWFnID0ganNvbi5sb2FkcyhvcGVuKCdEYXRhL1Rva2VuLmpzb24nLCAncicpLnJlYWQoKSlbJ1Rva2VuJ10NCiAgICAgICAgbmFtZSwgaWQgPSBkYXBhdGthbl9uYW1hKGNvb2tpZSwgdG9rZW5fZWFhZykNCiAgICAgICAgQ29uc29sZShzdHlsZT0iYm9sZCBibHVlIikucHJpbnQoUGFuZWwoZiIiIltib2xkIHdoaXRlXU5hbWEgOltib2xkIGdyZWVuXSB7bmFtZX0NCltib2xkIHdoaXRlXUlEICA6W2JvbGQgZ3JlZW5dIHtpZH0iIiIsIHRpdGxlPSJbYm9sZCBncmVlbl0oU0VMQU1BVCBEQVRBTkcpICIpKQ0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgQ29uc29sZShzdHlsZT0iYm9sZCBibHVlIikucHJpbnQoUGFuZWwoZiJbaXRhbGljIHJlZF17c3RyKGUpLnRpdGxlKCl9IiwgdGl0bGU9Iltib2xkIHllbGxvd10oRXJyb3IpIikpO3RpbWUuc2xlZXAoMy42KTtsb2dpbl9jb29raWUoKQ0KICAgIENvbnNvbGUoc3R5bGU9ImJvbGQgYmx1ZSIpLnByaW50KFBhbmVsKCIiIltib2xkIGJsdWVdWzAxXVtib2xkIHdoaXRlXS4gQ3JhY2sgVXNlciBEYXJpIFB1YmxpayBBdGF1IFRlbWFuDQpbYm9sZCBibHVlXVswMl1bYm9sZCB3aGl0ZV0uIENyYWNrIFVzZXIgRGFyaSBQZW5naWt1dA0KW2JvbGQgYmx1ZV1bMDNdW2JvbGQgd2hpdGVdLiBDcmFjayBVc2VyIERhcmkgTGlrZSBQb3N0aW5nYW4NCltib2xkIGJsdWVdWzA0XVtib2xkIHdoaXRlXS4gS2VsdWFyIERhcmkgU2NyaXB0KFtib2xkIGdyZWVuXUxvZ291dFtib2xkIHdoaXRlXSkiIiIsIHN1YnRpdGxlPSLila3ilIDilIDilIDilIDilIDilIAiLCBzdWJ0aXRsZV9hbGlnbj0ibGVmdCIsIHRpdGxlPSJbaG90X2dyZWVuXShNRU5VIFNDUklQVCkiKSkNCiAgICBxdWVyeSA9IENvbnNvbGUoKS5pbnB1dCgiW2JvbGQgYmx1ZV0gICDilbDilIA+ICIpDQogICAgaWYgcXVlcnkgPT0gJzEnIG9yIHF1ZXJ5ID09ICcwMSc6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIENvbnNvbGUoc3R5bGU9ImJvbGQgYmx1ZSIpLnByaW50KFBhbmVsKCJbaXRhbGljIHdoaXRlXVNpbGFoa2FuIE1hc3VrYW5baXRhbGljIGdyZWVuXSBJRCBGYWNlYm9vayBUYXJnZXRbaXRhbGljIHdoaXRlXSwgUGFzdGlrYW4gVGFyZ2V0IFB1YmxpayIsIHN1YnRpdGxlPSLila3ilIDilIDilIDilIDilIDilIAiLCBzdWJ0aXRsZV9hbGlnbj0ibGVmdCIsIHRpdGxlPSJbYm9sZCBncmVlbl0gKEtFVEVSQU5HQU4pIikpDQogICAgICAgICAgICB1c2VyaWQgPSBDb25zb2xlKCkuaW5wdXQoIltib2xkIGJsdWVdICAg4pWw4pSAPiAiKQ0KICAgICAgICAgICAgZm9yIHogaW4gdXNlcmlkLnNwbGl0KCcsJyk6DQogICAgICAgICAgICAgICAgZHVtcCgpLnB1YmxpayhpbnQoeiksIGNvb2tpZSwgdW5pdF9jdXJzb3IgPSAnJykNCiAgICAgICAgICAgIGlmIGxlbihEdW1wKSA8IDUwOg0KICAgICAgICAgICAgICAgIENvbnNvbGUoKS5wcmludCgiW2JvbGQgYmx1ZV0gICDilbDilIA+W2JvbGQgcmVkXSBVc2VyIFRlcmxhbHUgU2VkaWtpdCEiLCBlbmQ9J1xyJyk7dGltZS5zbGVlcCgzLjYpO2V4aXQoIlxyICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIpDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIENvbnNvbGUoc3R5bGU9ImJvbGQgYmx1ZSIpLnByaW50KFBhbmVsKGYiW2JvbGQgZ3JlZW5dVXNlciBJRCA6W2JvbGQgZ3JlZW5dIHtsZW4oRHVtcCl9IiwgdGl0bGU9Iltib2xkIGdyZWVuXShCZXJoYXNpbCBEdW1wKSIpKTtjcmFjaygpLm9wZW5fbGlzdCgpDQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgICAgIENvbnNvbGUoc3R5bGU9ImJvbGQgYmx1ZSIpLnByaW50KFBhbmVsKGYiW2l0YWxpYyByZWRde3N0cihlKS50aXRsZSgpfSIsIHRpdGxlPSJbYm9sZCBvcmFuZ2VdKEVycm9yKSIpKTtleGl0KCkNCiAgICBlbGlmIHF1ZXJ5ID09ICcyJyBvciBxdWVyeSA9PSAnMDInOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBDb25zb2xlKHN0eWxlPSJib2xkIGJsdWUiKS5wcmludChQYW5lbCgiW2l0YWxpYyB3aGl0ZV1TaWxhaGthbiBNYXN1a2FuW2l0YWxpYyBncmVlbl0gSUQgRmFjZWJvb2sgVGFyZ2V0W2l0YWxpYyB3aGl0ZV0sIFBhc3Rpa2FuIFRhcmdldCBQdWJsaWsiLCBzdWJ0aXRsZT0i4pWt4pSA4pSA4pSA4pSA4pSA4pSAIiwgc3VidGl0bGVfYWxpZ249ImxlZnQiLCB0aXRsZT0iW2JvbGQgZ3JlZW5dKEtFVEVSQU5HQU4pIikpDQogICAgICAgICAgICB1c2VyaWQgPSBDb25zb2xlKCkuaW5wdXQoIltib2xkIGJsdWVdICAg4pWw4pSAPiAiKQ0KICAgICAgICAgICAgZm9yIHogaW4gdXNlcmlkLnNwbGl0KCcsJyk6DQogICAgICAgICAgICAgICAgZHVtcCgpLnBlbmdpa3V0KHosIGNvb2tpZSwgdG9rZW5fZWFhZykNCiAgICAgICAgICAgIGlmIGxlbihEdW1wKSA8IDUwOg0KICAgICAgICAgICAgICAgIENvbnNvbGUoKS5wcmludCgiW2JvbGQgYmx1ZV0gICDilbDilIA+W2JvbGQgcmVkXSBVc2VyIFRlcmxhbHUgU2VkaWtpdCEiLCBlbmQ9J1xyJyk7dGltZS5zbGVlcCgzLjYpO2V4aXQoIlxyICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICIpDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIENvbnNvbGUoc3R5bGU9ImJvbGQgYmx1ZSIpLnByaW50KFBhbmVsKGYiW2JvbGQgZ3JlZW5dSnVtbGFoIFVzZXIgOltib2xkIGdyZWVuXSB7bGVuKER1bXApfSIsIHRpdGxlPSJbaG90X2dyZWVuXShCZXJoYXNpbCBEdW1wKSIpKTtjcmFjaygpLm9wZW5fbGlzdCgpDQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgICAgIENvbnNvbGUoc3R5bGU9ImJvbGQgYmx1ZSIpLnByaW50KFBhbmVsKGYiW2l0YWxpYyByZWRde3N0cihlKS50aXRsZSgpfSIsIHRpdGxlPSJbYm9sZCByZWRdIChFcnJvcikiKSk7ZXhpdCgpDQogICAgZWxpZiBxdWVyeSA9PSAnMycgb3IgcXVlcnkgPT0gJzAzJzoNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgQ29uc29sZShzdHlsZT0iYm9sZCBibHVlIikucHJpbnQoUGFuZWwoIltpdGFsaWMgd2hpdGVdU2lsYWhrYW4gTWFzdWthbiBJRCBQb3N0aW5nYW4gVGFyZ2V0LCBbYm9sZCB3aGl0ZV0gUGFzdGlrYW4gVGFyZ2V0IFB1YmxpayIsIHN1YnRpdGxlPSLila3ilIDilIDilIDilIDilIDilIAiLCBzdWJ0aXRsZV9hbGlnbj0ibGVmdCIsIHRpdGxlPSJbYm9sZCBncmVlbl0oS0VURVJBTkdBTikiKSkNCiAgICAgICAgICAgIHBvc3RpZCA9IENvbnNvbGUoKS5pbnB1dCgiW2JvbGQgYmx1ZV0gICDilbDilIA+ICIpDQogICAgICAgICAgICBmb3IgeiBpbiBwb3N0aWQuc3BsaXQoJywnKToNCiAgICAgICAgICAgICAgICBkdW1wKCkubGlrZXMoeiwgY29va2llLCB0b2tlbl9lYWFnLCBhZnRlciA9ICcnKQ0KICAgICAgICAgICAgaWYgbGVuKER1bXApIDwgMToNCiAgICAgICAgICAgICAgICBDb25zb2xlKCkucHJpbnQoIltib2xkIGJsdWVdICAg4pWw4pSAPltib2xkIGhvdF9yZWRdVXNlciBUZXJsYWx1IFNlZGlraXQhIiwgZW5kPSdccicpO3RpbWUuc2xlZXAoMy42KTtleGl0KCJcciAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiKQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBDb25zb2xlKHN0eWxlPSJib2xkIGJsdWUiKS5wcmludChQYW5lbChmIltib2xkIGdyZWVuXVVzZXIgSUQ6W2JvbGQgZ3JlZW5dIHtsZW4oRHVtcCl9IiwgdGl0bGU9Iltib2xkIGdyZWVuXShCZXJoYXNpbCBEdW1wKSIpKTtjcmFjaygpLm9wZW5fbGlzdCgpDQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgICAgIENvbnNvbGUoc3R5bGU9ImJvbGQgYmx1ZSIpLnByaW50KFBhbmVsKGYiW2l0YWxpYyByZWRde3N0cihlKS50aXRsZSgpfSIsIHRpdGxlPSJbYm9sZCByZWRdKEVycm9yKSIpKTtleGl0KCkNCiAgICBlbGlmIHF1ZXJ5ID09ICc0JyBvciBxdWVyeSA9PSAnMDQnOg0KICAgIAl0cnk6DQogICAgICAgICAgICBvcy5yZW1vdmUoJ0RhdGEvQ29va2llLmpzb24nKTtvcy5yZW1vdmUoJ0RhdGEvVG9rZW4uanNvbicpO0NvbnNvbGUoKS5wcmludCgiW2JvbGQgYmx1ZV0gICDilbDilIA+W2JvbGQgcHVycGxlXSBLZWx1YXIgRGFyaSBQcm9ncmFtISIsIGVuZD0nXHInKTt0aW1lLnNsZWVwKDMuNik7ZXhpdCgpDQogICAgCWV4Y2VwdDpleGl0KCkNCiAgICBlbHNlOg0KICAgICAgICBDb25zb2xlKCkucHJpbnQoIltib2xkIGJsdWVdICAg4pWw4pSAPltib2xkIHJlZF0gUGlsaWggWWFuZyBCZW5lciEiLCBlbmQ9J1xyJyk7dGltZS5zbGVlcCgzLjYpO2RhZnRhcl9tZW51KCkNCiMjIyBEVU1QICMjIw0KY2xhc3MgZHVtcDoNCg0KICAgIGRlZiBfX2luaXRfXyhzZWxmKSAtPiBOb25lOg0KICAgICAgICBwYXNzDQogICAgIyMjIERVTVAgUFVCTElLICMjIw0KICAgIGRlZiBwdWJsaWsoc2VsZiwgdXNlcmlkLCBjb29raWUsIHVuaXRfY3Vyc29yKToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgd2l0aCByZXF1ZXN0cy5TZXNzaW9uKCkgYXMgcjoNCiAgICAgICAgICAgICAgICByLmhlYWRlcnMudXBkYXRlKHsNCiAgICAgICAgICAgICAgICAgICAgJ3VwZ3JhZGUtaW5zZWN1cmUtcmVxdWVzdHMnOiAnMScsDQogICAgICAgICAgICAgICAgICAgICdhY2NlcHQnOiAndGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC45JywNCiAgICAgICAgICAgICAgICAgICAgJ2hvc3QnOiAnbS5mYWNlYm9vay5jb20nLA0KICAgICAgICAgICAgICAgICAgICAndXNlci1hZ2VudCc6ICdNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgNS4wOyBTTS1HOTAwUCBCdWlsZC9MUlgyMVQ7IHd2KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBDaHJvbWUvNDMuMC4yMzU3LjEyMSBNb2JpbGUgU2FmYXJpLzUzNy4zNiBbRkJfSUFCL0ZCNEE7RkJBVi8zNS4wLjAuNDguMjczO10nLA0KICAgICAgICAgICAgICAgICAgICAnYWNjZXB0LWxhbmd1YWdlJzogJ2lkLGVuO3E9MC45JywNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIHIuY29va2llcy51cGRhdGUoew0KICAgICAgICAgICAgICAgICAgICAnY29va2llJzogY29va2llDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICByZXNwb25zZSA9IHIuZ2V0KCdodHRwczovL20uZmFjZWJvb2suY29tL3Byb2ZpbGUucGhwP2lkPXt9JnY9ZnJpZW5kcyZ1bml0X2N1cnNvcj17fScuZm9ybWF0KHVzZXJpZCwgdW5pdF9jdXJzb3IpKS50ZXh0DQogICAgICAgICAgICAgICAgc2VsZi5hbGxfZnJpZW5kcyA9IHJlLmZpbmRhbGwoJ2hyZWY9ImZiOi8vcHJvZmlsZS8oLio/KSI+KC4qPyk8Jywgc3RyKHJlc3BvbnNlKSkNCiAgICAgICAgICAgICAgICBmb3IgeiBpbiBzZWxmLmFsbF9mcmllbmRzOg0KICAgICAgICAgICAgICAgICAgICBzZWxmLmlkX2ZyaWVuZHMsIHNlbGYubmFtZSA9IHpbMF0sIHpbMV0ubG93ZXIoKQ0KICAgICAgICAgICAgICAgICAgICBpZiBsZW4oc2VsZi5uYW1lKSA9PSAwIG9yIGxlbihzZWxmLm5hbWUpID4gMTAwOg0KICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHN0cihzZWxmLmlkX2ZyaWVuZHMpIGluIHN0cihEdW1wKToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb25zb2xlKCkucHJpbnQoZiJbYm9sZCBibHVlXSAgIOKVsOKUgD5bYm9sZCBwdXJwbGVdIER1bXAge3NlbGYuaWRfZnJpZW5kc33wn5Wce2xlbihEdW1wKX0gVXNlciAgICAgICAgICIsIGVuZD0nXHInKTt0aW1lLnNsZWVwKDAuMDAwNykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEdW1wLmFwcGVuZChmJ3tzZWxmLmlkX2ZyaWVuZHN9fHtzZWxmLm5hbWV9JykNCiAgICAgICAgICAgICAgICBpZiAnTWFhZiB0b2QgdGVyamFkaSBrZXNhbGFoYW4uJyBpbiBzdHIocmVzcG9uc2UpOg0KICAgICAgICAgICAgICAgICAgICBDb25zb2xlKCkucHJpbnQoZiJbYm9sZCBibHVlXSAgIOKVsOKUgD5bYm9sZCByZWRdIFNvcnkgQWRhIHlhbmcgU2FsYWggIHRvZCAgICAgICAgIiwgZW5kPSdccicpO3RpbWUuc2xlZXAoMi4xKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gMA0KICAgICAgICAgICAgICAgIGVsaWYgJ3VuaXRfY3Vyc29yPScgaW4gc3RyKHJlc3BvbnNlKToNCiAgICAgICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi51bml0X2N1cnNvciA9IHJlLnNlYXJjaCgndW5pdF9jdXJzb3I9KC4qPykmJywgc3RyKHJlc3BvbnNlKSkuZ3JvdXAoMSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucHVibGlrKHVzZXJpZCwgY29va2llLCBzZWxmLnVuaXRfY3Vyc29yKQ0KICAgICAgICAgICAgICAgICAgICBleGNlcHQgKEF0dHJpYnV0ZUVycm9yKToNCiAgICAgICAgICAgICAgICAgICAgICAgIENvbnNvbGUoKS5wcmludChmIltib2xkIGJsdWVdICAg4pWw4pSAPltib2xkIHJlZF0gVGlkYWsgRGl0ZW11a2FuISAgICAgICAgICAgIiwgZW5kPSdccicpO3RpbWUuc2xlZXAoMi4xKQ0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDINCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gMA0KICAgICAgICBleGNlcHQgKEtleWJvYXJkSW50ZXJydXB0KToNCiAgICAgICAgICAgIENvbnNvbGUoKS5wcmludChmIltib2xkIGJsdWVdICAg4pWw4pSAPltib2xkIHJlZF0gSW50ZXJ1cHNpIEtleWJvYXJkISAgICAgICAgICAiLCBlbmQ9J1xyJyk7dGltZS5zbGVlcCgzLjYpDQogICAgICAgICAgICByZXR1cm4gMw0KICAgICMjIyBEVU1QIFBFTkdJS1VUICMjIw0KICAgIGRlZiBwZW5naWt1dChzZWxmLCB1c2VyaWQsIGNvb2tpZSwgdG9rZW5fZWFhZyk6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHdpdGggcmVxdWVzdHMuU2Vzc2lvbigpIGFzIHI6DQogICAgICAgICAgICAgICAgci5oZWFkZXJzLnVwZGF0ZSh7DQogICAgICAgICAgICAgICAgICAgICdob3N0JzogJ2dyYXBoLmZhY2Vib29rLmNvbScsDQogICAgICAgICAgICAgICAgICAgICd1c2VyLWFnZW50JzogJ01vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCAxMTsgUk1YMjE0NCBCdWlsZC9SS1ExLjIwMTIxNy4wMDI7IHd2KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBDaHJvbWUvMTAzLjAuNTA2MC43MSBNb2JpbGUgU2FmYXJpLzUzNy4zNiBbRkJfSUFCL0ZCNEE7RkJBVi8zNzUuMS4wLjI4LjExMTtdJywNCiAgICAgICAgICAgICAgICAgICAgJ2Nvb2tpZSc6IGNvb2tpZQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSByLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vdjEuMC97fS9zdWJzY3JpYmVycz9hY2Nlc3NfdG9rZW49e30mcHJldHR5PTEmZmllbGRzPWlkJTJDbmFtZSZsaW1pdD01MDAwJy5mb3JtYXQodXNlcmlkLCB0b2tlbl9lYWFnKSkuanNvbigpDQogICAgICAgICAgICAgICAgaWYgJ3N1bW1hcnknIGluIHN0cihyZXNwb25zZSkgYW5kICduYW1lJyBpbiBzdHIocmVzcG9uc2UpOg0KICAgICAgICAgICAgICAgICAgICBmb3IgeiBpbiByZXNwb25zZVsnZGF0YSddOg0KICAgICAgICAgICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaWQsIHNlbGYubmFtZSA9IHpbJ2lkJ10sIHpbJ25hbWUnXS5sb3dlcigpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgc3RyKHNlbGYuaWQpIGluIHN0cihEdW1wKToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb25zb2xlKCkucHJpbnQoZiJbYm9sZCBibHVlXSAgIOKVsOKUgD5bYm9sZCBwdXJwbGVdIER1bXAge3NlbGYuaWR98J+VnHtsZW4oRHVtcCl9IFVzZXIgICAgICAgICAiLCBlbmQ9J1xyJyk7dGltZS5zbGVlcCgwLjAwMDcpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIER1bXAuYXBwZW5kKGYne3NlbGYuaWR9fHtzZWxmLm5hbWV9JykNCiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdCAoS2V5RXJyb3IpOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbnNvbGUoKS5wcmludChmIltib2xkIGJsdWVdICAg4pWw4pSAPltib2xkIHJlZF0ga2V5IGVyb3IhICAgICAgICAgICAgICAgICIsIGVuZD0nXHInKTt0aW1lLnNsZWVwKDMuNik7Y29udGludWUNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDANCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBDb25zb2xlKCkucHJpbnQoZiJbYm9sZCBibHVlXSAgIOKVsOKUgD5bYm9sZCByZWRdIEdhZ2FsIHt1c2VyaWR9IFVzZXIhICAgICAgICAgICIsIGVuZD0nXHInKTt0aW1lLnNsZWVwKDMuNikNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDENCiAgICAgICAgZXhjZXB0IChLZXlib2FyZEludGVycnVwdCk6DQogICAgICAgICAgICBDb25zb2xlKCkucHJpbnQoZiJbYm9sZCBibHVlXSAgIOKVsOKUgD5bYm9sZCByZWRdIEludGVydXBzaSBLZXlib2FyZCEgICAgICAgICAiLCBlbmQ9J1xyJyk7dGltZS5zbGVlcCgzLjYpDQogICAgICAgICAgICByZXR1cm4gMg0KICAgICMjIyBEVU1QIExJS0VTICMjIw0KICAgIGRlZiBsaWtlcyhzZWxmLCBwb3N0aWQsIGNvb2tpZSwgdG9rZW5fZWFhZywgYWZ0ZXIpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICB3aXRoIHJlcXVlc3RzLlNlc3Npb24oKSBhcyByOg0KICAgICAgICAgICAgICAgIHIuaGVhZGVycy51cGRhdGUoew0KICAgICAgICAgICAgICAgICAgICAnaG9zdCc6ICdncmFwaC5mYWNlYm9vay5jb20nLA0KICAgICAgICAgICAgICAgICAgICAndXNlci1hZ2VudCc6ICdNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgMTE7IFJNWDIxNDQgQnVpbGQvUktRMS4yMDEyMTcuMDAyOyB3dikgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgQ2hyb21lLzEwMy4wLjUwNjAuNzEgTW9iaWxlIFNhZmFyaS81MzcuMzYgW0ZCX0lBQi9GQjRBO0ZCQVYvMzc1LjEuMC4yOC4xMTE7XScsDQogICAgICAgICAgICAgICAgICAgICdjb29raWUnOiBjb29raWUNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gci5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL3YxLjAve30vbGlrZXMvP2FjY2Vzc190b2tlbj17fSZwcmV0dHk9MSZsaW1pdD0yNSZhZnRlcj17fScuZm9ybWF0KHBvc3RpZCwgdG9rZW5fZWFhZywgYWZ0ZXIpKS5qc29uKCkNCiAgICAgICAgICAgICAgICBpZiAnaWQnIGluIHN0cihyZXNwb25zZSkgYW5kICduYW1lJyBpbiBzdHIocmVzcG9uc2UpOg0KICAgICAgICAgICAgICAgICAgICBmb3IgeiBpbiByZXNwb25zZVsnZGF0YSddOg0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5pZCwgc2VsZi5uYW1lID0gelsnaWQnXSwgelsnbmFtZSddLmxvd2VyKCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHN0cihzZWxmLmlkKSBpbiBzdHIoRHVtcCk6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29uc29sZSgpLnByaW50KGYiW2JvbGQgYmx1ZV0gICDilbDilIA+W2JvbGQgcHVycGxlXSBEdW1wIHtzZWxmLmlkffCflZx7bGVuKER1bXApfSBVc2VyICAgICAgICAgIiwgZW5kPSdccicpO3RpbWUuc2xlZXAoMC4wMDA3KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIER1bXAuYXBwZW5kKGYne3NlbGYuaWR9fHtzZWxmLm5hbWV9JykNCiAgICAgICAgICAgICAgICAgICAgaWYgJ1wnYWZ0ZXJcJzonIGluIHN0cihyZXNwb25zZSk6DQogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxpa2VzKHBvc3RpZCwgY29va2llLCB0b2tlbl9lYWFnLCBhZnRlciA9IHJlc3BvbnNlWydwYWdpbmcnXVsnY3Vyc29ycyddWydhZnRlciddKQ0KICAgICAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDANCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBDb25zb2xlKCkucHJpbnQoZiJbYm9sZCBibHVlXSAgIOKVsOKUgD5bYm9sZCByZWRdIEdhZ2FsIHtwb3N0aWR9IE1lbmRhcGF0a2FuIFVzZXIgSUQgICAgICAgICAgIiwgZW5kPSdccicpO3RpbWUuc2xlZXAoMy42KQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gMQ0KICAgICAgICBleGNlcHQgKEtleWJvYXJkSW50ZXJydXB0KToNCiAgICAgICAgICAgIENvbnNvbGUoKS5wcmludChmIltib2xkIGJsdWVdICAg4pWw4pSAPltib2xkIHJlZF0gSW50ZXJ1cHNpIEtleWJvYXJkISAgICAgICAgICAiLCBlbmQ9J1xyJyk7dGltZS5zbGVlcCgzLjYpDQogICAgICAgICAgICByZXR1cm4gMg0KIyMjIENSQUNLICMjIw0KY2xhc3MgY3JhY2s6DQoNCiAgICBkZWYgX19pbml0X18oc2VsZikgLT4gTm9uZToNCiAgICAgICAgc2VsZi5jaGVja3BvaW50LCBzZWxmLmxvb3BpbmcsIHNlbGYuc3VjY2VzcyA9IFtdLCAwLCBbXQ0KICAgICAgICBwYXNzDQogICAgIyMjIEdFTkVSQVRFIFBBU1NXT1JEICMjIw0KICAgIGRlZiBnZW5lcmF0ZV9wYXNzd29yZChzZWxmLCBuYW1lKToNCiAgICAgICAgc2VsZi5wYXNzd29yZCA9IFtdDQogICAgICAgIGZvciBuYW1hIGluIG5hbWUuc3BsaXQoJyAnKToNCiAgICAgICAgICAgIGlmIGxlbihuYW1lKSA8PSA1Og0KICAgICAgICAgICAgICAgIGlmIGxlbihuYW1hKSA8IDM6DQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYXNzd29yZC5hcHBlbmQobmFtYSArICcxMjMnKQ0KICAgICAgICAgICAgICAgICAgICBzZWxmLnBhc3N3b3JkLmFwcGVuZChuYW1hICsgJzEyMzQnKQ0KICAgICAgICAgICAgICAgICAgICBzZWxmLnBhc3N3b3JkLmFwcGVuZChuYW1hICsgJzEyMzQ1JykNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYXNzd29yZC5hcHBlbmQobmFtYSArICcxMjM0NTYnKQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBpZiBsZW4obmFtYSkgPCAzOg0KICAgICAgICAgICAgICAgICAgICBzZWxmLnBhc3N3b3JkLmFwcGVuZChuYW1lKQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIHNlbGYucGFzc3dvcmQuYXBwZW5kKG5hbWUpDQogICAgICAgICAgICAgICAgICAgIHNlbGYucGFzc3dvcmQuYXBwZW5kKG5hbWEgKyAnMTIzJykNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYXNzd29yZC5hcHBlbmQobmFtYSArICcxMjM0JykNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYXNzd29yZC5hcHBlbmQobmFtYSArICcxMjM0NScpDQogICAgICAgICAgICAgICAgICAgIHNlbGYucGFzc3dvcmQuYXBwZW5kKG5hbWEgKyAnMTIzNDU2JykNCiAgICAgICAgc2VsZi5wYXNzd29yZF8gPSBbXQ0KICAgICAgICBmb3IgeiBpbiBzZWxmLnBhc3N3b3JkOg0KICAgICAgICAgICAgaWYgc3RyKHopIGluIHN0cihzZWxmLnBhc3N3b3JkXyk6DQogICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgc2VsZi5wYXNzd29yZF8uYXBwZW5kKHopDQogICAgICAgIHJldHVybiBzZWxmLnBhc3N3b3JkXw0KICAgICMjIyBPUEVOIExJU1QgRFVNUCAjIyMNCiAgICBkZWYgb3Blbl9saXN0KHNlbGYpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBDb25zb2xlKHN0eWxlPSJib2xkIGJsdWUiKS5wcmludChQYW5lbCgiIiJbYm9sZCB3aGl0ZV1IYXNpbCBDcmFja1tib2xkIGdyZWVuXSBPayBbYm9sZCB3aGl0ZV0gVGVyc2ltcGFuIERpIDpbYm9sZCBncmVlbl0gUmVzdWx0cy9Pay50eHQNCltib2xkIHdoaXRlXUhhc2lsIENyYWNrW2JvbGQgeWVsbG93XSBDcFtib2xkIHdoaXRlXSBUZXJzaW1wYW4gRGkgOltib2xkIHllbGxvd10gUmVzdWx0cy9DcC50eHQiIiIsIHRpdGxlPSJbYm9sZCBncmVlbl0oSGFzaWwgQ3JhY2spIikpDQogICAgICAgICAgICB3aXRoIFRocmVhZFBvb2xFeGVjdXRvcihtYXhfd29ya2Vycz0zNSkgYXMgKFYpOg0KICAgICAgICAgICAgICAgIGZvciB6IGluIER1bXA6DQogICAgICAgICAgICAgICAgICAgIHNlbGYuZW1haWwsIHNlbGYubmFtYSA9IHouc3BsaXQoJ3wnKVswXSwgei5zcGxpdCgnfCcpWzFdDQogICAgICAgICAgICAgICAgICAgIHNlbGYucGFzc3dvcmQgPSBzZWxmLmdlbmVyYXRlX3Bhc3N3b3JkKHNlbGYubmFtYSkNCiAgICAgICAgICAgICAgICAgICAgVi5zdWJtaXQoc2VsZi5tYWluLCBEdW1wLCBzZWxmLmVtYWlsLCBzZWxmLnBhc3N3b3JkKQ0KICAgICAgICAgICAgQ29uc29sZSgpLnByaW50KCJccltib2xkIHdoaXRlXVtbYm9sZCBwdXJwbGVdU2VsZXNhaVtib2xkIHdoaXRlXV0gICAgICAgICAgICAgICAgICAgICAgICAgICAiKTtleGl0KCkNCiAgICAgICAgZXhjZXB0OmV4aXQoKQ0KICAgICMjIyBNQUlOICMjIw0KICAgIGRlZiBtYWluKHNlbGYsIHRvdGFsLCBlbWFpbCwgcGFzc3dvcmQpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBmb3IgcHdzIGluIHBhc3N3b3JkOg0KICAgICAgICAgICAgICAgIHNlbGYudXNlcmFnZW50ID0gc2VsZi5yZWFsbWVfdXNlcmFnZW50KHRvdGFsID0gMSkNCiAgICAgICAgICAgICAgICB3aXRoIHJlcXVlc3RzLlNlc3Npb24oKSBhcyByOg0KICAgICAgICAgICAgICAgICAgICByLmhlYWRlcnMudXBkYXRlKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdjb25uZWN0aW9uJzogJ2tlZXAtYWxpdmUnLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ2FjY2VwdC1sYW5ndWFnZSc6ICdpZCxlbi1VUztxPTAuOSxlbjtxPTAuOCcsDQogICAgICAgICAgICAgICAgICAgICAgICAnc2VjLWZldGNoLW1vZGUnOiAnbmF2aWdhdGUnLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ2FjY2VwdCc6ICd0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS9hdmlmLGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgsYXBwbGljYXRpb24vc2lnbmVkLWV4Y2hhbmdlO3Y9YjM7cT0wLjknLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ3NlYy1mZXRjaC1zZXN0JzogJ2RvY3VtZW50JywNCiAgICAgICAgICAgICAgICAgICAgICAgICdzZWMtZmV0Y2gtc2l0ZSc6ICdub25lJywNCiAgICAgICAgICAgICAgICAgICAgICAgICdjYWNoZS1jb250cm9sJzogJ21heC1hZ2U9MCcsDQogICAgICAgICAgICAgICAgICAgICAgICAnc2VjLWZldGNoLXVzZXInOiAnPzEnLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ3VwZ3JhZGUtaW5zZWN1cmUtcmVxdWVzdHMnOiAnMScsDQogICAgICAgICAgICAgICAgICAgICAgICAnaG9zdCc6ICdtLmFscGhhLmZhY2Vib29rLmNvbScsDQogICAgICAgICAgICAgICAgICAgICAgICAndXNlci1hZ2VudCc6IHNlbGYudXNlcmFnZW50DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gci5nZXQoJ2h0dHBzOi8vbS5hbHBoYS5mYWNlYm9vay5jb20vbG9naW4ucGhwPycpLnRleHQNCiAgICAgICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5qYXpvZXN0ID0gcmUuc2VhcmNoKCduYW1lPSJqYXpvZXN0IiB2YWx1ZT0iKFxkKykiJywgc3RyKHJlc3BvbnNlKSkuZ3JvdXAoMSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubV90cyA9IHJlLnNlYXJjaCgnbmFtZT0ibV90cyIgdmFsdWU9IiguKj8pIicsIHN0cihyZXNwb25zZSkpLmdyb3VwKDEpDQogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxpID0gcmUuc2VhcmNoKCduYW1lPSJsaSIgdmFsdWU9IiguKj8pIicsIHN0cihyZXNwb25zZSkpLmdyb3VwKDEpDQogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmZiX2R0c2cgPSByZS5zZWFyY2goJ3siZHRzZyI6eyJ0b2tlbiI6IiguKj8pIicsIHN0cihyZXNwb25zZSkpLmdyb3VwKDEpDQogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxzZCA9IHJlLnNlYXJjaCgnbmFtZT0ibHNkIiB2YWx1ZT0iKC4qPykiJywgc3RyKHJlc3BvbnNlKSkuZ3JvdXAoMSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX19hID0gcmUuc2VhcmNoKCciZW5jcnlwdGVkIjoiKC4qPykiJywgc3RyKHJlc3BvbnNlKSkuZ3JvdXAoMSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX19zcGluX3QgPSByZS5zZWFyY2goJyJfX3NwaW5fdCI6KFxkKyksJywgc3RyKHJlc3BvbnNlKSkuZ3JvdXAoMSkNCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0IChBdHRyaWJ1dGVFcnJvcikgYXMgZToNCiAgICAgICAgICAgICAgICAgICAgICAgIENvbnNvbGUoKS5wcmludCgiW2JvbGQgYmx1ZV0gICDilbDilIA+W2JvbGQgcmVkXSBHYWdhbC4uLiAgICAgICAgICAgICAgICAgICIsIGVuZD0nXHInKTt0aW1lLnNsZWVwKDIuMCk7Y29udGludWUNCiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdtX3RzJzogc2VsZi5tX3RzLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ2xpJzogc2VsZi5saSwNCiAgICAgICAgICAgICAgICAgICAgICAgICd0cnlfbnVtYmVyJzogMCwNCiAgICAgICAgICAgICAgICAgICAgICAgICd1bnJlY29nbml6ZWRfdHJpZXMnOiAwLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ2VtYWlsJzogZW1haWwsDQogICAgICAgICAgICAgICAgICAgICAgICAncHJlZmlsbF9jb250YWN0X3BvaW50JzogZW1haWwsDQogICAgICAgICAgICAgICAgICAgICAgICAncHJlZmlsbF9zb3VyY2UnOiAnYnJvd3Nlcl9kcm9wZG93bicsDQogICAgICAgICAgICAgICAgICAgICAgICAncHJlZmlsbF90eXBlJzogJ3Bhc3N3b3JkJywNCiAgICAgICAgICAgICAgICAgICAgICAgICdmaXJzdF9wcmVmaWxsX3NvdXJjZSc6ICdicm93c2VyX2Ryb3Bkb3duJywNCiAgICAgICAgICAgICAgICAgICAgICAgICdmaXJzdF9wcmVmaWxsX3R5cGUnOiAnY29udGFjdF9wb2ludCcsDQogICAgICAgICAgICAgICAgICAgICAgICAnaGFkX2NwX3ByZWZpbGxlZCc6IFRydWUsDQogICAgICAgICAgICAgICAgICAgICAgICAnaGFkX3Bhc3N3b3JkX3ByZWZpbGxlZCc6IFRydWUsDQogICAgICAgICAgICAgICAgICAgICAgICAnaXNfc21hcnRfbG9jayc6IEZhbHNlLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ2JpX3hyd2gnOiAwLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ2VuY3Bhc3MnOiAnI1BXRF9CUk9XU0VSOjA6e306e30nLmZvcm1hdChzZWxmLl9fc3Bpbl90LCBwd3MpLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ2ZiX2R0c2cnOiBzZWxmLmZiX2R0c2csDQogICAgICAgICAgICAgICAgICAgICAgICAnamF6b2VzdCc6IHNlbGYuamF6b2VzdCwNCiAgICAgICAgICAgICAgICAgICAgICAgICdsc2QnOiBzZWxmLmxzZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICdfX2R5bic6ICcnLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ19fY3NyJzogJycsDQogICAgICAgICAgICAgICAgICAgICAgICAnX19yZXEnOiByYW5kb20uY2hvaWNlKFsnMScsJzInLCczJywnNCcsJzUnXSksDQogICAgICAgICAgICAgICAgICAgICAgICAnX19hJzogc2VsZi5fX2EsDQogICAgICAgICAgICAgICAgICAgICAgICAnX191c2VyJzogMA0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIHIuaGVhZGVycy51cGRhdGUoew0KICAgICAgICAgICAgICAgICAgICAgICAgJ2Nvb2tpZSc6ICgiOyAiLmpvaW4oW3N0cih4KSsiPSIrc3RyKHkpIGZvciB4LHkgaW4gci5jb29raWVzLmdldF9kaWN0KCkuaXRlbXMoKV0pKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICdzZWMtZmV0Y2gtc2l0ZSc6ICdzYW1lLW9yaWdpbicsDQogICAgICAgICAgICAgICAgICAgICAgICAnb3JpZ2luJzogJ2h0dHBzOi8vbS5hbHBoYS5mYWNlYm9vay5jb20nLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ2FjY2VwdCc6ICcqLyonLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ3gtZmItbHNkJzogc2VsZi5sc2QsDQogICAgICAgICAgICAgICAgICAgICAgICAncmVmZXJlcic6ICdodHRwczovL20uYWxwaGEuZmFjZWJvb2suY29tL2xvZ2luLnBocD8nLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ2NvbnRlbnQtbGVuZ3RoJzogc3RyKGxlbigoIiYiKS5qb2luKFsgIiVzPSVzIiAlICh4LCB5KSBmb3IgeCwgeSBpbiBkYXRhLml0ZW1zKCkgXSkpKQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICByZXNwb25zZTIgPSByLnBvc3QoJ2h0dHBzOi8vbS5hbHBoYS5mYWNlYm9vay5jb20vbG9naW4vZGV2aWNlLWJhc2VkL2xvZ2luL2FzeW5jLz9yZWZzcmM9ZGVwcmVjYXRlZCZsd3Y9MTAwJywgZGF0YSA9IGRhdGEsIGFsbG93X3JlZGlyZWN0cyA9IFRydWUpDQogICAgICAgICAgICAgICAgICAgICNvcGVuKCdSZXNwb25zZS50eHQnLCAnYSsnKS53cml0ZShmJ3tlbWFpbH18e3B3c318e3IuY29va2llcy5nZXRfZGljdCgpfVxuJykNCiAgICAgICAgICAgICAgICAgICAgaWYgJ2NfdXNlcicgaW4gci5jb29raWVzLmdldF9kaWN0KCkua2V5cygpOg0KICAgICAgICAgICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY29va2llID0gKCI7Ii5qb2luKFtzdHIoeCkrIj0iK3N0cih5KSBmb3IgeCx5IGluIHIuY29va2llcy5nZXRfZGljdCgpLml0ZW1zKCldKSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2VwdDpwYXNzDQogICAgICAgICAgICAgICAgICAgICAgICB0cmVlID0gVHJlZSgiXHJbYm9sZCBibHVlXUxPR0lOIEJFUkhBU0lMICAgICAgICAgICAgICAgICAgICAgIiwgc3R5bGUgPSAiYm9sZCB3aGl0ZSIpDQogICAgICAgICAgICAgICAgICAgICAgICB0cmVlLmFkZChmIltib2xkIGdyZWVuXVVTRVIgSUQgOiB7ZW1haWx9IikuYWRkKGYiW2JvbGQgZ3JlZW5dUGFzc3dvcmQgOiB7cHdzfSIsIHN0eWxlID0gImJvbGQgd2hpdGUiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdHJlZS5hZGQoZiJbYm9sZCBwdXJwbGVdQ09PS0lFIDoge3NlbGYuY29va2llfSIsIHN0eWxlID0gImJvbGQgd2hpdGUiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQodHJlZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc3VjY2Vzcy5hcHBlbmQoZid7ZW1haWx9fHtwd3N9fHtzZWxmLmNvb2tpZX0nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgb3BlbignUmVzdWx0cy9Pay50eHQnLCAnYSsnKS53cml0ZShmJ3tlbWFpbH18e3B3c318e3NlbGYuY29va2llfVxuJykNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgICAgIGVsaWYgJ2NoZWNrcG9pbnQnIGluIHIuY29va2llcy5nZXRfZGljdCgpLmtleXMoKToNCiAgICAgICAgICAgICAgICAgICAgICAgIHRyZWUgPSBUcmVlKCJccltib2xkIHllbGxvd11MT0dJTiBHQUdBTCAgICAgICAgICAgICAgICAgICAgICAiLCBzdHlsZSA9ICJib2xkIHdoaXRlIikNCiAgICAgICAgICAgICAgICAgICAgICAgIHRyZWUuYWRkKGYiW2JvbGQgeWVsbG93XVVTRVIgSUQgOiB7ZW1haWx9IikuYWRkKGYiW2JvbGQgeWVsbG93XVBhc3N3b3JkIDoge3B3c30iLCBzdHlsZSA9ICJib2xkIHdoaXRlIikNCiAgICAgICAgICAgICAgICAgICAgICAgIHRyZWUuYWRkKGYiW2JvbGQgcHVycGxlXVVTRVJBR0VOVCA6IHtzZWxmLnVzZXJhZ2VudH0iLCBzdHlsZSA9ICJib2xkIHdoaXRlIikNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KHRyZWUpDQogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNoZWNrcG9pbnQuYXBwZW5kKGYne2VtYWlsfXx7cHdzfXx7c2VsZi51c2VyYWdlbnR9JykNCiAgICAgICAgICAgICAgICAgICAgICAgIG9wZW4oJ1Jlc3VsdHMvQ3AudHh0JywgJ2ErJykud3JpdGUoZid7ZW1haWx9fHtwd3N9fHtzZWxmLnVzZXJhZ2VudH1cbicpDQogICAgICAgICAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgIHNlbGYubG9vcGluZyArPSAxDQogICAgICAgICAgICBDb25zb2xlKCkucHJpbnQoZiJbYm9sZCBibHVlXSAgIOKVsOKUgD5bYm9sZCB3aGl0ZV0gcHJvc2VzIHtzdHIobGVuKER1bXApKX3wn5Wce3NlbGYubG9vcGluZ30gT0s6LVtib2xkIGdyZWVuXXtsZW4oc2VsZi5zdWNjZXNzKX1bYm9sZCB3aGl0ZV0gQ1A6LVtib2xkIHllbGxvd117bGVuKHNlbGYuY2hlY2twb2ludCl9W2JvbGQgd2hpdGVdICAgICAgICAgICAgICAiLCBlbmQ9J1xyJykNCiAgICAgICAgZXhjZXB0IChyZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvciwgcmVxdWVzdHMuZXhjZXB0aW9ucy5DaHVua2VkRW5jb2RpbmdFcnJvcik6DQogICAgICAgICAgICBDb25zb2xlKCkucHJpbnQoIltib2xkIGJsdWVdICAg4pWw4pSAPltib2xkIHJlZF0gaW50ZXJuZXQgYmVybWFzYWxhaCEgICAgICAgICAgICAgICAgICAgICIsIGVuZD0nXHInKTt0aW1lLnNsZWVwKDcuOSk7c2VsZi5tYWluKHRvdGFsLCBlbWFpbCwgcGFzc3dvcmQpDQogICAgIyMjIFJFQUxNRSBVU0VSQUdFTlQgIyMjDQogICAgZGVmIHJlYWxtZV91c2VyYWdlbnQoc2VsZiwgdG90YWwpOg0KICAgICAgICBmb3IgXyBpbiByYW5nZSh0b3RhbCk6DQogICAgICAgICAgICBzZWxmLmJyb3dzZXJfdmVyc2lvbiA9IChmJ3tyYW5kb20ucmFuZHJhbmdlKDg1LCAxMDUpfS4wLntyYW5kb20ucmFuZHJhbmdlKDQyMDAsIDQ5MDApfS57cmFuZG9tLnJhbmRyYW5nZSg0MCwgMTUwKX0nKQ0KICAgICAgICAgICAgc2VsZi5idWlsZCA9ICgnJy5qb2luKHJhbmRvbS5jaG9pY2UoJzEyMzQ1Njc4OTBBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWjEyMzQ1Njc4OTAnKSBmb3IgeSBpbiByYW5nZSg2KSkpDQogICAgICAgICAgICBzZWxmLmFuZHJvaWRfdmVyc2lvbiA9IHJhbmRvbS5jaG9pY2UoWycxMScsICcxMCcsICc5LjAnXSkNCiAgICAgICAgICAgIHNlbGYuYW5kcm9pZF9tb2RlbCA9IHJhbmRvbS5jaG9pY2UoWydOb3RlIDEwJywgJ1JlZG1pIDgnLCAnUmVkbWkgNyddKQ0KICAgICAgICAgICAgc2VsZi51c2VyYWdlbnQgPSByYW5kb20uY2hvaWNlKFsnTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDExOyBSZWRtaSBOb3RlIDEwIEJ1aWxkL1JLUTEuMjExMTAzLjAwMikgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgQ2hyb21lLzg3LjAuNDI4MC4xNDEgTW9iaWxlIFNhZmFyaS81MzcuMzYnLCAnTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDk7IFJlZG1pIDggQnVpbGQvUEtRMS4xOTAzMTkuMDAxOyB3dikgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgQ2hyb21lLzEwOS4wLjU0MTQuMTE3IE1vYmlsZSBTYWZhcmkvNTM3LjM2JywgJ01vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCAxMDsgUmVkbWkgNyBCdWlsZC9RS1ExLjE5MTAwOC4wMDE7IHd2KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBWZXJzaW9uLzQuMCBDaHJvbWUvOTUuMC40NjM4Ljc0IE1vYmlsZSBTYWZhcmkvNTM3LjM2Jy5mb3JtYXQoc2VsZi5hbmRyb2lkX3ZlcnNpb24sIHNlbGYuYW5kcm9pZF9tb2RlbCwgc2VsZi5idWlsZCwgc2VsZi5icm93c2VyX3ZlcnNpb24pXSkNCiAgICAgICAgcmV0dXJuIHNlbGYudXNlcmFnZW50DQoNCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6DQogICAgdHJ5Og0KICAgICAgICBsZXNlbnNpKCkNCiAgICAgICAgb3Muc3lzdGVtKCdnaXQgcHVsbCcpO2RhZnRhcl9tZW51KCkNCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgIENvbnNvbGUoc3R5bGU9ImJvbGQgYmx1ZSIpLnByaW50KFBhbmVsKGYiW2l0YWxpYyByZWRde3N0cihlKS50aXRsZSgpfSIsIHRpdGxlPSJbYm9sZCByZWRdKEVycm9yKSIpKTtleGl0KCk='))