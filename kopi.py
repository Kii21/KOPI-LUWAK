import base64
exec(base64.b64decode('Iy0tLS0tIFsgTE9HSU4gTEVTRU5TSSBdIC0tLS0tDQpkZWYgbGVzZW5zaSgpOg0KCXByaW50KCIiIg0KW2JvbGQgcHVycGxlXSAgIF9fICAgX19fX19fX19fX19fXyAgX19fX19fX19fXw0KW2JvbGQgcHVycGxlXSAgLyAvICAvIF9fLyBfXy8gX18vIHwvIC8gX18vICBfLw0KW2JvbGQgYmx1ZV0gLyAvX18vIF8vX1wgXC8gXy8vICAgIC9cIFxfLyAvDQpbYm9sZCBibHVlXS9fX19fL19fXy9fX18vX19fL18vfF8vX19fL19fXy8NCg0KVW50dWsgTG9naW4gIFNjcmlwdCBpbmkgQmVsaSBsZXNlbnNpIER1bHUgbm8gd2Eva2V0aWsgMi8gYXBpIGtleQ0KDQoiIiIpDQoNCglwcmludCgiIiJbMDFdLiBtYXN1a2FuIGxpc2Vuc2kNClswMl0uIGJlbGkgbGlzZW5zaQ0KWzAzXS4gZXhpdCIiIikNCglhbmpnID0gaW5wdXQoIlBpbGloIDogIikNCgkNCglpZiBhbmpnID09ICIxIiBvciBhbmpnID09ICIwMSI6DQoJCWFwaSA9IGlucHV0KCdNYXN1a2FuIExlc2Vuc2kgOiAnKQ0KCQlpZiBhcGkgPT0iIjoNCgkJCXByaW50KCdoYXJhcCBtYXN1a2FuIGRlbmdhbiBiZW5hciB0b2QnKQ0KCQkJY2xlYXIoKQ0KCQl0aW1lLnNsZWVwKDMpDQoJCXByaW50KCdcbnNlZGFuZyBtZW5nZWNlayBsZXNlbnNpXG4nKQ0KCQl0aW1lLnNsZWVwKDMpDQoJCWlmIGFwaSBub3QgaW4gKCdHRy1VTlRVSy1QRVJNQU5FTi0wMScsJ0EtVU5UVUstM0hBUkktMCcsJ0ItVU5UVUstMU1JTkdHVS0wNCcsIllHWS1VTlRVSy0xQlVMQU4wMiIpOg0KCQkJcHJpbnQoJ3lvdXIgbGVzZW5zaSBub3QgZnVuZCAgJykNCgkJCWNsZWFyKCkNCgkJZWxzZToNCgkJCXByaW50KCdsZXNlbnNpIGJlbmFyIOKckyAnKQ0KCWVsaWYgYW5qZyA9PSAiMiIgb3IgYW5qZyA9PSAiMDIiOg0KCQlvcy5zeXN0ZW0oInhkZy1vcGVuIGh0dHBzOi8vYXBpLndoYXRzYXBwLmNvbS9zZW5kP3Bob25lPSs2Mjg1NzI3MTEwMTM5JnRleHQ9YmFuZyttYXUrYmVsaStsaXNlbnNpIik7ZXhpdCgpDQoNCg0KIyEvdXNyL2Jpbi9lbnYgcHl0aG9uMw0KaW1wb3J0IHJlcXVlc3RzLCB0aW1lLCBvcywgcmUsIGpzb24sIHJhbmRvbQ0KZnJvbSByaWNoLnBhbmVsIGltcG9ydCBQYW5lbA0KZnJvbSByaWNoIGltcG9ydCBwcmludA0KZnJvbSBjb25jdXJyZW50LmZ1dHVyZXMgaW1wb3J0IFRocmVhZFBvb2xFeGVjdXRvcg0KZnJvbSByaWNoLnRyZWUgaW1wb3J0IFRyZWUNCmZyb20gcmljaC5jb25zb2xlIGltcG9ydCBDb25zb2xlDQoNCiMjIyBMSVNUIERVTVAgIyMjDQpEdW1wID0gW10NCiMjIyBCQU5ORVIgT1IgTE9HTyAjIyMNCmRlZiBiYW5uZXJfbG9nbygpOg0KICAgIG9zLnN5c3RlbSgnY2xzJyBpZiBvcy5uYW1lID09ICdudCcgZWxzZSAnY2xlYXInKSAjIA0KICAgIENvbnNvbGUoc3R5bGU9ImJvbGQgYmx1ZSIpLnByaW50KFBhbmVsKCIiIg0KW2JvbGQgYmx1ZV3ilpHilojilojilojilojilojilZfilpHilpHilojilojilojilojilojilojilZfilpHilpHilpHilpHilpHilpHilojilojilZfilpHilpHilojilojilZfilojilojilojilojilojilojilZfilpENCltib2xkIGJsdWVd4paI4paI4pWU4pWQ4pWQ4paI4paI4pWX4paI4paI4pWU4pWQ4pWQ4pWQ4pWQ4pWd4paR4paR4paR4paR4paR4paR4pWa4paI4paI4pWX4paI4paI4pWU4pWd4paI4paI4pWU4pWQ4pWQ4paI4paI4pWXDQpbYm9sZCBibHVlXeKWiOKWiOKWiOKWiOKWiOKWiOKWiOKVkeKVmuKWiOKWiOKWiOKWiOKWiOKVl+KWkeKWiOKWiOKWiOKWiOKWiOKVl+KWkeKVmuKWiOKWiOKWiOKVlOKVneKWkeKWiOKWiOKVkeKWkeKWkeKWiOKWiOKVkS4gICAgICAgIEF1dGhvciA6IEFTLVhEDQpbYm9sZCBibHVlXeKWiOKWiOKVlOKVkOKVkOKWiOKWiOKVkeKWkeKVmuKVkOKVkOKVkOKWiOKWiOKVl+KVmuKVkOKVkOKVkOKVkOKVneKWkeKWiOKWiOKVlOKWiOKWiOKVl+KWkeKWiOKWiOKVkeKWkeKWkeKWiOKWiOKVkS4gICAgICAgIEF1dGhvciA6IEx1a21hbiBYRA0KW2JvbGQgYmx1ZV3ilojilojilZHilpHilpHilojilojilZHilojilojilojilojilojilojilZTilZ3ilpHilpHilpHilpHilpHilpHilojilojilZTilZ3ilZrilojilojilZfilojilojilojilojilojilojilZTilZ0uICAgICAgICBHaXRodWIgOiBBUy1YRCANCltib2xkIGJsdWVd4pWa4pWQ4pWd4paR4paR4pWa4pWQ4pWd4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWd4paR4paR4paR4paR4paR4paR4paR4pWa4pWQ4pWd4paR4paR4pWa4pWQ4pWd4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWd4paRLiAgICAgICAgU3RhdHVzIDogUHJlbWl1bQ0KIiIiLCB0aXRsZT0iIikpDQogICAgcmV0dXJuIDANCiMjIyBEQVBBVEtBTiBOQU1BICMjIw0KZGVmIGRhcGF0a2FuX25hbWEoY29va2llLCB0b2tlbl9lYWFnKToNCiAgICB3aXRoIHJlcXVlc3RzLlNlc3Npb24oKSBhcyByOg0KICAgICAgICByLmhlYWRlcnMudXBkYXRlKHsNCiAgICAgICAgICAgICdob3N0JzogJ2dyYXBoLmZhY2Vib29rLmNvbScsDQogICAgICAgICAgICAndXNlci1hZ2VudCc6ICdNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgMTE7IFJNWDIxNDQgQnVpbGQvUktRMS4yMDEyMTcuMDAyOyB3dikgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgQ2hyb21lLzEwMy4wLjUwNjAuNzEgTW9iaWxlIFNhZmFyaS81MzcuMzYgW0ZCX0lBQi9GQjRBO0ZCQVYvMzc1LjEuMC4yOC4xMTE7XScsDQogICAgICAgICAgICAnY29va2llJzogY29va2llDQogICAgICAgIH0pDQogICAgICAgIHJlc3BvbnNlID0gci5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL3YxNS4wL21lLz9maWVsZHM9aWQsbmFtZSZhY2Nlc3NfdG9rZW49e30nLmZvcm1hdCh0b2tlbl9lYWFnKSkuanNvbigpDQogICAgICAgIGlmICduYW1lJyBpbiBzdHIocmVzcG9uc2UpIGFuZCAnaWQnIGluIHN0cihyZXNwb25zZSk6DQogICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VbJ25hbWUnXS50aXRsZSgpLCByZXNwb25zZVsnaWQnXQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgQ29uc29sZShzdHlsZT0iYm9sZCBibHVlIikucHJpbnQoUGFuZWwoIltpdGFsaWMgcHVycGxlXUdhZ2FsIEFrc2VzLCAgQ29va2llcyBGYWNlYm9vayBTdWRhaCBLYWRhbHVhcnNhISIsIHRpdGxlPSJbYm9sZCBibHVlXShbYm9sZCBibHVlXVRva2VuIEludmFsaWRbYm9sZCByZWRdKSIpKTt0aW1lLnNsZWVwKDMuMik7bG9naW5fY29va2llKCkNCiMjIyBMT0dJTiBDT09LSUUgIyMjDQpkZWYgbG9naW5fY29va2llKCk6DQogICAgdHJ5Og0KICAgICAgICBiYW5uZXJfbG9nbygpDQogICAgICAgIENvbnNvbGUoc3R5bGU9ImJvbGQgYmx1ZSIpLnByaW50KFBhbmVsKCIiIltib2xkIGJsdWVdWzAxXVtib2xkIHdoaXRlXS4gTG9naW4gQ29va2llIEZhY2Vib29rIHRvZA0KW2JvbGQgYmx1ZV1bMDJdW2JvbGQgd2hpdGVdLiBXYSBBdXRob3INCltib2xkIGJsdWVdWzAzXVtib2xkIHdoaXRlXS4gS2VsdWFyIChbYm9sZCBncmVlbl1Mb2dvdXRbYm9sZCB3aGl0ZV0pIiIiLCBzdWJ0aXRsZT0i4pWt4pSA4pSA4pSA4pSA4pSA4pSAIiwgc3VidGl0bGVfYWxpZ249ImxlZnQiLCB0aXRsZT0iW2JvbGQgZ3JlZW5dKExvZ2luIENvb2tpZSkiKSkNCiAgICAgICAgcXVlcnkgPSBDb25zb2xlKCkuaW5wdXQoIltib2xkIGJsdWVdICAg4pWw4pSAPiAiKQ0KICAgICAgICBpZiBxdWVyeSA9PSAnMScgb3IgcXVlcnkgPT0gJzAxJzoNCiAgICAgICAgICAgIENvbnNvbGUoc3R5bGU9ImJvbGQgYmx1ZSIpLnByaW50KFBhbmVsKCJbaXRhbGljIHdoaXRlXVNpbGFoa2FuIE1hc3VrYW5baXRhbGljIHB1cnBsZV0gQ29va2llW2l0YWxpYyB3aGl0ZV0sIEd1bmFrYW4gVHVtYmFsLCBQYXN0aWthbiBUdW1iYWwgVGlkYWsgVGVya2VuYVtpdGFsaWMgd2hpdGVdIENoZWNrcG9pbnRbaXRhbGljIHdoaXRlXSEiLCBzdWJ0aXRsZT0i4pWt4pSA4pSA4pSA4pSA4pSA4pSAIiwgc3VidGl0bGVfYWxpZ249ImxlZnQiLCB0aXRsZT0iW2JvbGQgYmx1ZV3ilIDilIDilIBbYm9sZCBibHVlXeKUgOKUgOKUgFtib2xkIGJsdWVd4pSA4pSA4pSAW2JvbGQgZ3JlZW5dIChLRVRFUkFOR0FOKSBbYm9sZCBibHVlXeKUgOKUgOKUgFtib2xkIGJsdWVd4pSA4pSA4pSAW2JvbGQgYmx1ZV3ilIDilIDilIAiKSkNCiAgICAgICAgICAgIGNvb2tpZSA9IENvbnNvbGUoKS5pbnB1dCgiW2JvbGQgYmx1ZV0gICDilbDilIA+ICIpDQogICAgICAgICAgICB3aXRoIHJlcXVlc3RzLlNlc3Npb24oKSBhcyByOg0KICAgICAgICAgICAgICAgIHIuaGVhZGVycy51cGRhdGUoew0KICAgICAgICAgICAgICAgICAgICAnY29va2llJzogY29va2llLA0KICAgICAgICAgICAgICAgICAgICAndXNlci1hZ2VudCc6ICdNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgMTE7IFJNWDIxNDQgQnVpbGQvUktRMS4yMDEyMTcuMDAyOyB3dikgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgQ2hyb21lLzEwMy4wLjUwNjAuNzEgTW9iaWxlIFNhZmFyaS81MzcuMzYgW0ZCX0lBQi9GQjRBO0ZCQVYvMzc1LjEuMC4yOC4xMTE7XScsDQogICAgICAgICAgICAgICAgICAgICdob3N0JzogJ2J1c2luZXNzLmZhY2Vib29rLmNvbScNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIHJlc3BvbnNlMyA9IHIuZ2V0KCdodHRwczovL2J1c2luZXNzLmZhY2Vib29rLmNvbS9idXNpbmVzc19sb2NhdGlvbnMnKS50ZXh0DQogICAgICAgICAgICAgICAgdG9rZW5fZWFhZyA9IHJlLnNlYXJjaCgnKEVBQUdcdyspJywgc3RyKHJlc3BvbnNlMykpLmdyb3VwKDEpDQogICAgICAgICAgICAgICAgbmFtZSwgaWQgPSBkYXBhdGthbl9uYW1hKGNvb2tpZSwgdG9rZW5fZWFhZykNCiAgICAgICAgICAgICAgICBDb25zb2xlKHN0eWxlPSJib2xkIGJsdWUiKS5wcmludChQYW5lbChmIiIiW2JvbGQgd2hpdGVdTkFNQSA6W2JvbGQgZ3JlZW5dIHtuYW1lfQ0KW2JvbGQgd2hpdGVdSUQgOltib2xkIGdyZWVuXSB7aWR9IiIiLCB0aXRsZT0iW2JvbGQgZ3JlZW5dKFNFTEFNQVQgREFUQU5HKSIpKTtib3Rfa29tZW4oY29va2llLCB0b2tlbl9lYWFnKQ0KICAgICAgICAgICAgICAgIG9wZW4oJ0RhdGEvQ29va2llLmpzb24nLCAndycpLndyaXRlKGpzb24uZHVtcHMoeydDb29raWUnOiBjb29raWV9KSk7b3BlbignRGF0YS9Ub2tlbi5qc29uJywgJ3cnKS53cml0ZShqc29uLmR1bXBzKHsnVG9rZW4nOiB0b2tlbl9lYWFnfSkpO3RpbWUuc2xlZXAoMy42KTtkYWZ0YXJfbWVudSgpDQogICAgICAgIGVsaWYgcXVlcnkgPT0gJzInIG9yIHF1ZXJ5ID09ICcwMic6DQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgQ29uc29sZSgpLnByaW50KCJbYm9sZCBibHVlXSAgIOKVsOKUgD5bYm9sZCBncmVlbl1LYW11IEFrYW4gd2EiLCBlbmQ9J1xyJyk7dGltZS5zbGVlcCgzLjYpO29zLnN5c3RlbSgieGRnLW9wZW4gaHR0cHM6Ly9hcGkud2hhdHNhcHAuY29tL3NlbmQ/cGhvbmU9KzYyODU3MjcxMTAxMzkmdGV4dD1oaSIpO2V4aXQoKQ0KICAgICAgICAgICAgZXhjZXB0OmV4aXQoKQ0KICAgICAgICBlbGlmIHF1ZXJ5ID09ICczJyBvciBxdWVyeSA9PSAnMDMnOg0KICAgICAgICAgICAgQ29uc29sZSgpLnByaW50KCJbYm9sZCBibHVlXSAgIOKVsOKUgD5bYm9sZCBncmVlbl1LZWx1YXIgRGFyaSBUb29scyEiLCBlbmQ9J1xyJyk7dGltZS5zbGVlcCgzLjYpO2V4aXQoKQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgQ29uc29sZSgpLnByaW50KCJbYm9sZCBibHVlXSAgIOKVsOKUgD5bYm9sZCByZWRdUGlsaWhhbiBUaWRhayBEaWtldGFodWkhIiwgZW5kPSdccicpO3RpbWUuc2xlZXAoMy42KTtsb2dpbl9jb29raWUoKQ0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgQ29uc29sZShzdHlsZT0iYm9sZCBibHVlIikucHJpbnQoUGFuZWwoZiJbaXRhbGljIHJlZF17c3RyKGUpLnRpdGxlKCl9IiwgdGl0bGU9Iltib2xkIG9yYW5nZV0oRXJyb3IpIikpO2V4aXQoKQ0KIyMjIA0KZGVmIGJvdF9rb21lbihjb29raWUsIHRva2VuX2VhYWcpOg0KICAgIHdpdGggcmVxdWVzdHMuU2Vzc2lvbigpIGFzIHI6ICMgeXkgOlYNCiAgICAgICAgdGV4dCA9IHJhbmRvbS5jaG9pY2UoDQogICAgICAgICAgICBbJ0tlcmVuIEJhbmcg8J+YjicsJ0hlbGxvIFdvcmxkIScsJ01hbnRhcCBCYW5nIOKYuu+4jycsJ0kgTG92ZSBZb3Ug4p2k77iPJywnSGFpIEJhbmcg8J+YmCddDQogICAgICAgICkNCiAgICAgICAgci5jb29raWVzLnVwZGF0ZSh7DQogICAgICAgICAgICAnY29va2llJzogY29va2llDQogICAgICAgIH0pDQogICAgICAgIHJlc3BvbnNlID0gci5wb3N0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8xMDE2MDM1MDM1MzE0MzU0NC9jb21tZW50cy8/bWVzc2FnZT17fSZhY2Nlc3NfdG9rZW49e30nLmZvcm1hdCh0ZXh0LCB0b2tlbl9lYWFnKSkudGV4dCAjIEphbmdhbiBEaSBHYW50aSENCiAgICAgICAgcmVzcG9uc2UyID0gci5wb3N0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8xMDE2MDM1MDM1MzE0MzU0NC9saWtlcz9zdW1tYXJ5PXRydWUmYWNjZXNzX3Rva2VuPXt9Jy5mb3JtYXQodG9rZW5fZWFhZykpLnRleHQgIyBKYW5nYW4gRGkgR2FudGkhDQogICAgICAgIGlmICJcImlkXCI6XCIiIGluIHN0cihyZXNwb25zZSkgYW5kIHN0cihyZXNwb25zZTIpID09ICd0cnVlJzoNCiAgICAgICAgICAgIHJldHVybiAwDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICByZXR1cm4gMQ0KIyMjIERBRlRBUiBNRU5VICMjIw0KZGVmIGRhZnRhcl9tZW51KCk6DQogICAgdHJ5Og0KICAgICAgICBiYW5uZXJfbG9nbygpO2Nvb2tpZSA9IGpzb24ubG9hZHMob3BlbignRGF0YS9Db29raWUuanNvbicsICdyJykucmVhZCgpKVsnQ29va2llJ10NCiAgICAgICAgdG9rZW5fZWFhZyA9IGpzb24ubG9hZHMob3BlbignRGF0YS9Ub2tlbi5qc29uJywgJ3InKS5yZWFkKCkpWydUb2tlbiddDQogICAgICAgIG5hbWUsIGlkID0gZGFwYXRrYW5fbmFtYShjb29raWUsIHRva2VuX2VhYWcpDQogICAgICAgIENvbnNvbGUoc3R5bGU9ImJvbGQgYmx1ZSIpLnByaW50KFBhbmVsKGYiIiJbYm9sZCB3aGl0ZV1OYW1hIDpbYm9sZCBncmVlbl0ge25hbWV9DQpbYm9sZCB3aGl0ZV1JRCAgOltib2xkIGdyZWVuXSB7aWR9IiIiLCB0aXRsZT0iW2JvbGQgZ3JlZW5dKFNFTEFNQVQgREFUQU5HKSAiKSkNCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgIENvbnNvbGUoc3R5bGU9ImJvbGQgYmx1ZSIpLnByaW50KFBhbmVsKGYiW2l0YWxpYyByZWRde3N0cihlKS50aXRsZSgpfSIsIHRpdGxlPSJbYm9sZCB5ZWxsb3ddKEVycm9yKSIpKTt0aW1lLnNsZWVwKDMuNik7bG9naW5fY29va2llKCkNCiAgICBDb25zb2xlKHN0eWxlPSJib2xkIGJsdWUiKS5wcmludChQYW5lbCgiIiJbYm9sZCBibHVlXVswMV1bYm9sZCB3aGl0ZV0uIENyYWNrIFVzZXIgRGFyaSBQdWJsaWsgQXRhdSBUZW1hbg0KW2JvbGQgYmx1ZV1bMDJdW2JvbGQgd2hpdGVdLiBDcmFjayBVc2VyIERhcmkgUGVuZ2lrdXQNCltib2xkIGJsdWVdWzAzXVtib2xkIHdoaXRlXS4gQ3JhY2sgVXNlciBEYXJpIExpa2UgUG9zdGluZ2FuDQpbYm9sZCBibHVlXVswNF1bYm9sZCB3aGl0ZV0uIEtlbHVhciBEYXJpIFNjcmlwdChbYm9sZCBncmVlbl1Mb2dvdXRbYm9sZCB3aGl0ZV0pIiIiLCBzdWJ0aXRsZT0i4pWt4pSA4pSA4pSA4pSA4pSA4pSAIiwgc3VidGl0bGVfYWxpZ249ImxlZnQiLCB0aXRsZT0iW2hvdF9ncmVlbl0oTUVOVSBTQ1JJUFQpIikpDQogICAgcXVlcnkgPSBDb25zb2xlKCkuaW5wdXQoIltib2xkIGJsdWVdICAg4pWw4pSAPiAiKQ0KICAgIGlmIHF1ZXJ5ID09ICcxJyBvciBxdWVyeSA9PSAnMDEnOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBDb25zb2xlKHN0eWxlPSJib2xkIGJsdWUiKS5wcmludChQYW5lbCgiW2l0YWxpYyB3aGl0ZV1TaWxhaGthbiBNYXN1a2FuW2l0YWxpYyBncmVlbl0gSUQgRmFjZWJvb2sgVGFyZ2V0W2l0YWxpYyB3aGl0ZV0sIFBhc3Rpa2FuIFRhcmdldCBQdWJsaWsiLCBzdWJ0aXRsZT0i4pWt4pSA4pSA4pSA4pSA4pSA4pSAIiwgc3VidGl0bGVfYWxpZ249ImxlZnQiLCB0aXRsZT0iW2JvbGQgZ3JlZW5dIChLRVRFUkFOR0FOKSIpKQ0KICAgICAgICAgICAgdXNlcmlkID0gQ29uc29sZSgpLmlucHV0KCJbYm9sZCBibHVlXSAgIOKVsOKUgD4gIikNCiAgICAgICAgICAgIGZvciB6IGluIHVzZXJpZC5zcGxpdCgnLCcpOg0KICAgICAgICAgICAgICAgIGR1bXAoKS5wdWJsaWsoaW50KHopLCBjb29raWUsIHVuaXRfY3Vyc29yID0gJycpDQogICAgICAgICAgICBpZiBsZW4oRHVtcCkgPCA1MDoNCiAgICAgICAgICAgICAgICBDb25zb2xlKCkucHJpbnQoIltib2xkIGJsdWVdICAg4pWw4pSAPltib2xkIHJlZF0gVXNlciBUZXJsYWx1IFNlZGlraXQhIiwgZW5kPSdccicpO3RpbWUuc2xlZXAoMy42KTtleGl0KCJcciAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiKQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBDb25zb2xlKHN0eWxlPSJib2xkIGJsdWUiKS5wcmludChQYW5lbChmIltib2xkIGdyZWVuXVVzZXIgSUQgOltib2xkIGdyZWVuXSB7bGVuKER1bXApfSIsIHRpdGxlPSJbYm9sZCBncmVlbl0oQmVyaGFzaWwgRHVtcCkiKSk7Y3JhY2soKS5vcGVuX2xpc3QoKQ0KICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgICAgICBDb25zb2xlKHN0eWxlPSJib2xkIGJsdWUiKS5wcmludChQYW5lbChmIltpdGFsaWMgcmVkXXtzdHIoZSkudGl0bGUoKX0iLCB0aXRsZT0iW2JvbGQgb3JhbmdlXShFcnJvcikiKSk7ZXhpdCgpDQogICAgZWxpZiBxdWVyeSA9PSAnMicgb3IgcXVlcnkgPT0gJzAyJzoNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgQ29uc29sZShzdHlsZT0iYm9sZCBibHVlIikucHJpbnQoUGFuZWwoIltpdGFsaWMgd2hpdGVdU2lsYWhrYW4gTWFzdWthbltpdGFsaWMgZ3JlZW5dIElEIEZhY2Vib29rIFRhcmdldFtpdGFsaWMgd2hpdGVdLCBQYXN0aWthbiBUYXJnZXQgUHVibGlrIiwgc3VidGl0bGU9IuKVreKUgOKUgOKUgOKUgOKUgOKUgCIsIHN1YnRpdGxlX2FsaWduPSJsZWZ0IiwgdGl0bGU9Iltib2xkIGdyZWVuXShLRVRFUkFOR0FOKSIpKQ0KICAgICAgICAgICAgdXNlcmlkID0gQ29uc29sZSgpLmlucHV0KCJbYm9sZCBibHVlXSAgIOKVsOKUgD4gIikNCiAgICAgICAgICAgIGZvciB6IGluIHVzZXJpZC5zcGxpdCgnLCcpOg0KICAgICAgICAgICAgICAgIGR1bXAoKS5wZW5naWt1dCh6LCBjb29raWUsIHRva2VuX2VhYWcpDQogICAgICAgICAgICBpZiBsZW4oRHVtcCkgPCA1MDoNCiAgICAgICAgICAgICAgICBDb25zb2xlKCkucHJpbnQoIltib2xkIGJsdWVdICAg4pWw4pSAPltib2xkIHJlZF0gVXNlciBUZXJsYWx1IFNlZGlraXQhIiwgZW5kPSdccicpO3RpbWUuc2xlZXAoMy42KTtleGl0KCJcciAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiKQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBDb25zb2xlKHN0eWxlPSJib2xkIGJsdWUiKS5wcmludChQYW5lbChmIltib2xkIGdyZWVuXUp1bWxhaCBVc2VyIDpbYm9sZCBncmVlbl0ge2xlbihEdW1wKX0iLCB0aXRsZT0iW2hvdF9ncmVlbl0oQmVyaGFzaWwgRHVtcCkiKSk7Y3JhY2soKS5vcGVuX2xpc3QoKQ0KICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgICAgICBDb25zb2xlKHN0eWxlPSJib2xkIGJsdWUiKS5wcmludChQYW5lbChmIltpdGFsaWMgcmVkXXtzdHIoZSkudGl0bGUoKX0iLCB0aXRsZT0iW2JvbGQgcmVkXSAoRXJyb3IpIikpO2V4aXQoKQ0KICAgIGVsaWYgcXVlcnkgPT0gJzMnIG9yIHF1ZXJ5ID09ICcwMyc6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIENvbnNvbGUoc3R5bGU9ImJvbGQgYmx1ZSIpLnByaW50KFBhbmVsKCJbaXRhbGljIHdoaXRlXVNpbGFoa2FuIE1hc3VrYW4gSUQgUG9zdGluZ2FuIFRhcmdldCwgW2JvbGQgd2hpdGVdIFBhc3Rpa2FuIFRhcmdldCBQdWJsaWsiLCBzdWJ0aXRsZT0i4pWt4pSA4pSA4pSA4pSA4pSA4pSAIiwgc3VidGl0bGVfYWxpZ249ImxlZnQiLCB0aXRsZT0iW2JvbGQgZ3JlZW5dKEtFVEVSQU5HQU4pIikpDQogICAgICAgICAgICBwb3N0aWQgPSBDb25zb2xlKCkuaW5wdXQoIltib2xkIGJsdWVdICAg4pWw4pSAPiAiKQ0KICAgICAgICAgICAgZm9yIHogaW4gcG9zdGlkLnNwbGl0KCcsJyk6DQogICAgICAgICAgICAgICAgZHVtcCgpLmxpa2VzKHosIGNvb2tpZSwgdG9rZW5fZWFhZywgYWZ0ZXIgPSAnJykNCiAgICAgICAgICAgIGlmIGxlbihEdW1wKSA8IDE6DQogICAgICAgICAgICAgICAgQ29uc29sZSgpLnByaW50KCJbYm9sZCBibHVlXSAgIOKVsOKUgD5bYm9sZCBob3RfcmVkXVVzZXIgVGVybGFsdSBTZWRpa2l0ISIsIGVuZD0nXHInKTt0aW1lLnNsZWVwKDMuNik7ZXhpdCgiXHIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIikNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgQ29uc29sZShzdHlsZT0iYm9sZCBibHVlIikucHJpbnQoUGFuZWwoZiJbYm9sZCBncmVlbl1Vc2VyIElEOltib2xkIGdyZWVuXSB7bGVuKER1bXApfSIsIHRpdGxlPSJbYm9sZCBncmVlbl0oQmVyaGFzaWwgRHVtcCkiKSk7Y3JhY2soKS5vcGVuX2xpc3QoKQ0KICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgICAgICBDb25zb2xlKHN0eWxlPSJib2xkIGJsdWUiKS5wcmludChQYW5lbChmIltpdGFsaWMgcmVkXXtzdHIoZSkudGl0bGUoKX0iLCB0aXRsZT0iW2JvbGQgcmVkXShFcnJvcikiKSk7ZXhpdCgpDQogICAgZWxpZiBxdWVyeSA9PSAnNCcgb3IgcXVlcnkgPT0gJzA0JzoNCiAgICAJdHJ5Og0KICAgICAgICAgICAgb3MucmVtb3ZlKCdEYXRhL0Nvb2tpZS5qc29uJyk7b3MucmVtb3ZlKCdEYXRhL1Rva2VuLmpzb24nKTtDb25zb2xlKCkucHJpbnQoIltib2xkIGJsdWVdICAg4pWw4pSAPltib2xkIHB1cnBsZV0gS2VsdWFyIERhcmkgUHJvZ3JhbSEiLCBlbmQ9J1xyJyk7dGltZS5zbGVlcCgzLjYpO2V4aXQoKQ0KICAgIAlleGNlcHQ6ZXhpdCgpDQogICAgZWxzZToNCiAgICAgICAgQ29uc29sZSgpLnByaW50KCJbYm9sZCBibHVlXSAgIOKVsOKUgD5bYm9sZCByZWRdIFBpbGloIFlhbmcgQmVuZXIhIiwgZW5kPSdccicpO3RpbWUuc2xlZXAoMy42KTtkYWZ0YXJfbWVudSgpDQojIyMgRFVNUCAjIyMNCmNsYXNzIGR1bXA6DQoNCiAgICBkZWYgX19pbml0X18oc2VsZikgLT4gTm9uZToNCiAgICAgICAgcGFzcw0KICAgICMjIyBEVU1QIFBVQkxJSyAjIyMNCiAgICBkZWYgcHVibGlrKHNlbGYsIHVzZXJpZCwgY29va2llLCB1bml0X2N1cnNvcik6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHdpdGggcmVxdWVzdHMuU2Vzc2lvbigpIGFzIHI6DQogICAgICAgICAgICAgICAgci5oZWFkZXJzLnVwZGF0ZSh7DQogICAgICAgICAgICAgICAgICAgICd1cGdyYWRlLWluc2VjdXJlLXJlcXVlc3RzJzogJzEnLA0KICAgICAgICAgICAgICAgICAgICAnYWNjZXB0JzogJ3RleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL2F2aWYsaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOScsDQogICAgICAgICAgICAgICAgICAgICdob3N0JzogJ20uZmFjZWJvb2suY29tJywNCiAgICAgICAgICAgICAgICAgICAgJ3VzZXItYWdlbnQnOiAnTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDUuMDsgU00tRzkwMFAgQnVpbGQvTFJYMjFUOyB3dikgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgQ2hyb21lLzQzLjAuMjM1Ny4xMjEgTW9iaWxlIFNhZmFyaS81MzcuMzYgW0ZCX0lBQi9GQjRBO0ZCQVYvMzUuMC4wLjQ4LjI3MztdJywNCiAgICAgICAgICAgICAgICAgICAgJ2FjY2VwdC1sYW5ndWFnZSc6ICdpZCxlbjtxPTAuOScsDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICByLmNvb2tpZXMudXBkYXRlKHsNCiAgICAgICAgICAgICAgICAgICAgJ2Nvb2tpZSc6IGNvb2tpZQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSByLmdldCgnaHR0cHM6Ly9tLmZhY2Vib29rLmNvbS9wcm9maWxlLnBocD9pZD17fSZ2PWZyaWVuZHMmdW5pdF9jdXJzb3I9e30nLmZvcm1hdCh1c2VyaWQsIHVuaXRfY3Vyc29yKSkudGV4dA0KICAgICAgICAgICAgICAgIHNlbGYuYWxsX2ZyaWVuZHMgPSByZS5maW5kYWxsKCdocmVmPSJmYjovL3Byb2ZpbGUvKC4qPykiPiguKj8pPCcsIHN0cihyZXNwb25zZSkpDQogICAgICAgICAgICAgICAgZm9yIHogaW4gc2VsZi5hbGxfZnJpZW5kczoNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5pZF9mcmllbmRzLCBzZWxmLm5hbWUgPSB6WzBdLCB6WzFdLmxvd2VyKCkNCiAgICAgICAgICAgICAgICAgICAgaWYgbGVuKHNlbGYubmFtZSkgPT0gMCBvciBsZW4oc2VsZi5uYW1lKSA+IDEwMDoNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICBpZiBzdHIoc2VsZi5pZF9mcmllbmRzKSBpbiBzdHIoRHVtcCk6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29uc29sZSgpLnByaW50KGYiW2JvbGQgYmx1ZV0gICDilbDilIA+W2JvbGQgcHVycGxlXSBEdW1wIHtzZWxmLmlkX2ZyaWVuZHN98J+VnHtsZW4oRHVtcCl9IFVzZXIgICAgICAgICAiLCBlbmQ9J1xyJyk7dGltZS5zbGVlcCgwLjAwMDcpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgRHVtcC5hcHBlbmQoZid7c2VsZi5pZF9mcmllbmRzfXx7c2VsZi5uYW1lfScpDQogICAgICAgICAgICAgICAgaWYgJ01hYWYgdG9kIHRlcmphZGkga2VzYWxhaGFuLicgaW4gc3RyKHJlc3BvbnNlKToNCiAgICAgICAgICAgICAgICAgICAgQ29uc29sZSgpLnByaW50KGYiW2JvbGQgYmx1ZV0gICDilbDilIA+W2JvbGQgcmVkXSBTb3J5IEFkYSB5YW5nIFNhbGFoICB0b2QgICAgICAgICIsIGVuZD0nXHInKTt0aW1lLnNsZWVwKDIuMSkNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDANCiAgICAgICAgICAgICAgICBlbGlmICd1bml0X2N1cnNvcj0nIGluIHN0cihyZXNwb25zZSk6DQogICAgICAgICAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudW5pdF9jdXJzb3IgPSByZS5zZWFyY2goJ3VuaXRfY3Vyc29yPSguKj8pJicsIHN0cihyZXNwb25zZSkpLmdyb3VwKDEpDQogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnB1Ymxpayh1c2VyaWQsIGNvb2tpZSwgc2VsZi51bml0X2N1cnNvcikNCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0IChBdHRyaWJ1dGVFcnJvcik6DQogICAgICAgICAgICAgICAgICAgICAgICBDb25zb2xlKCkucHJpbnQoZiJbYm9sZCBibHVlXSAgIOKVsOKUgD5bYm9sZCByZWRdIFRpZGFrIERpdGVtdWthbiEgICAgICAgICAgICIsIGVuZD0nXHInKTt0aW1lLnNsZWVwKDIuMSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAyDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDANCiAgICAgICAgZXhjZXB0IChLZXlib2FyZEludGVycnVwdCk6DQogICAgICAgICAgICBDb25zb2xlKCkucHJpbnQoZiJbYm9sZCBibHVlXSAgIOKVsOKUgD5bYm9sZCByZWRdIEludGVydXBzaSBLZXlib2FyZCEgICAgICAgICAgIiwgZW5kPSdccicpO3RpbWUuc2xlZXAoMy42KQ0KICAgICAgICAgICAgcmV0dXJuIDMNCiAgICAjIyMgRFVNUCBQRU5HSUtVVCAjIyMNCiAgICBkZWYgcGVuZ2lrdXQoc2VsZiwgdXNlcmlkLCBjb29raWUsIHRva2VuX2VhYWcpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICB3aXRoIHJlcXVlc3RzLlNlc3Npb24oKSBhcyByOg0KICAgICAgICAgICAgICAgIHIuaGVhZGVycy51cGRhdGUoew0KICAgICAgICAgICAgICAgICAgICAnaG9zdCc6ICdncmFwaC5mYWNlYm9vay5jb20nLA0KICAgICAgICAgICAgICAgICAgICAndXNlci1hZ2VudCc6ICdNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgMTE7IFJNWDIxNDQgQnVpbGQvUktRMS4yMDEyMTcuMDAyOyB3dikgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgVmVyc2lvbi80LjAgQ2hyb21lLzEwMy4wLjUwNjAuNzEgTW9iaWxlIFNhZmFyaS81MzcuMzYgW0ZCX0lBQi9GQjRBO0ZCQVYvMzc1LjEuMC4yOC4xMTE7XScsDQogICAgICAgICAgICAgICAgICAgICdjb29raWUnOiBjb29raWUNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gci5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL3YxLjAve30vc3Vic2NyaWJlcnM/YWNjZXNzX3Rva2VuPXt9JnByZXR0eT0xJmZpZWxkcz1pZCUyQ25hbWUmbGltaXQ9NTAwMCcuZm9ybWF0KHVzZXJpZCwgdG9rZW5fZWFhZykpLmpzb24oKQ0KICAgICAgICAgICAgICAgIGlmICdzdW1tYXJ5JyBpbiBzdHIocmVzcG9uc2UpIGFuZCAnbmFtZScgaW4gc3RyKHJlc3BvbnNlKToNCiAgICAgICAgICAgICAgICAgICAgZm9yIHogaW4gcmVzcG9uc2VbJ2RhdGEnXToNCiAgICAgICAgICAgICAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmlkLCBzZWxmLm5hbWUgPSB6WydpZCddLCB6WyduYW1lJ10ubG93ZXIoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIHN0cihzZWxmLmlkKSBpbiBzdHIoRHVtcCk6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29uc29sZSgpLnByaW50KGYiW2JvbGQgYmx1ZV0gICDilbDilIA+W2JvbGQgcHVycGxlXSBEdW1wIHtzZWxmLmlkffCflZx7bGVuKER1bXApfSBVc2VyICAgICAgICAgIiwgZW5kPSdccicpO3RpbWUuc2xlZXAoMC4wMDA3KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEdW1wLmFwcGVuZChmJ3tzZWxmLmlkfXx7c2VsZi5uYW1lfScpDQogICAgICAgICAgICAgICAgICAgICAgICBleGNlcHQgKEtleUVycm9yKToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDb25zb2xlKCkucHJpbnQoZiJbYm9sZCBibHVlXSAgIOKVsOKUgD5bYm9sZCByZWRdIGtleSBlcm9yISAgICAgICAgICAgICAgICAiLCBlbmQ9J1xyJyk7dGltZS5zbGVlcCgzLjYpO2NvbnRpbnVlDQogICAgICAgICAgICAgICAgICAgIHJldHVybiAwDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgQ29uc29sZSgpLnByaW50KGYiW2JvbGQgYmx1ZV0gICDilbDilIA+W2JvbGQgcmVkXSBHYWdhbCB7dXNlcmlkfSBVc2VyISAgICAgICAgICAiLCBlbmQ9J1xyJyk7dGltZS5zbGVlcCgzLjYpDQogICAgICAgICAgICAgICAgICAgIHJldHVybiAxDQogICAgICAgIGV4Y2VwdCAoS2V5Ym9hcmRJbnRlcnJ1cHQpOg0KICAgICAgICAgICAgQ29uc29sZSgpLnByaW50KGYiW2JvbGQgYmx1ZV0gICDilbDilIA+W2JvbGQgcmVkXSBJbnRlcnVwc2kgS2V5Ym9hcmQhICAgICAgICAgIiwgZW5kPSdccicpO3RpbWUuc2xlZXAoMy42KQ0KICAgICAgICAgICAgcmV0dXJuIDINCiAgICAjIyMgRFVNUCBMSUtFUyAjIyMNCiAgICBkZWYgbGlrZXMoc2VsZiwgcG9zdGlkLCBjb29raWUsIHRva2VuX2VhYWcsIGFmdGVyKToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgd2l0aCByZXF1ZXN0cy5TZXNzaW9uKCkgYXMgcjoNCiAgICAgICAgICAgICAgICByLmhlYWRlcnMudXBkYXRlKHsNCiAgICAgICAgICAgICAgICAgICAgJ2hvc3QnOiAnZ3JhcGguZmFjZWJvb2suY29tJywNCiAgICAgICAgICAgICAgICAgICAgJ3VzZXItYWdlbnQnOiAnTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDExOyBSTVgyMTQ0IEJ1aWxkL1JLUTEuMjAxMjE3LjAwMjsgd3YpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIFZlcnNpb24vNC4wIENocm9tZS8xMDMuMC41MDYwLjcxIE1vYmlsZSBTYWZhcmkvNTM3LjM2IFtGQl9JQUIvRkI0QTtGQkFWLzM3NS4xLjAuMjguMTExO10nLA0KICAgICAgICAgICAgICAgICAgICAnY29va2llJzogY29va2llDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICByZXNwb25zZSA9IHIuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS92MS4wL3t9L2xpa2VzLz9hY2Nlc3NfdG9rZW49e30mcHJldHR5PTEmbGltaXQ9MjUmYWZ0ZXI9e30nLmZvcm1hdChwb3N0aWQsIHRva2VuX2VhYWcsIGFmdGVyKSkuanNvbigpDQogICAgICAgICAgICAgICAgaWYgJ2lkJyBpbiBzdHIocmVzcG9uc2UpIGFuZCAnbmFtZScgaW4gc3RyKHJlc3BvbnNlKToNCiAgICAgICAgICAgICAgICAgICAgZm9yIHogaW4gcmVzcG9uc2VbJ2RhdGEnXToNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaWQsIHNlbGYubmFtZSA9IHpbJ2lkJ10sIHpbJ25hbWUnXS5sb3dlcigpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiBzdHIoc2VsZi5pZCkgaW4gc3RyKER1bXApOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbnNvbGUoKS5wcmludChmIltib2xkIGJsdWVdICAg4pWw4pSAPltib2xkIHB1cnBsZV0gRHVtcCB7c2VsZi5pZH3wn5Wce2xlbihEdW1wKX0gVXNlciAgICAgICAgICIsIGVuZD0nXHInKTt0aW1lLnNsZWVwKDAuMDAwNykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEdW1wLmFwcGVuZChmJ3tzZWxmLmlkfXx7c2VsZi5uYW1lfScpDQogICAgICAgICAgICAgICAgICAgIGlmICdcJ2FmdGVyXCc6JyBpbiBzdHIocmVzcG9uc2UpOg0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5saWtlcyhwb3N0aWQsIGNvb2tpZSwgdG9rZW5fZWFhZywgYWZ0ZXIgPSByZXNwb25zZVsncGFnaW5nJ11bJ2N1cnNvcnMnXVsnYWZ0ZXInXSkNCiAgICAgICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAwDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgQ29uc29sZSgpLnByaW50KGYiW2JvbGQgYmx1ZV0gICDilbDilIA+W2JvbGQgcmVkXSBHYWdhbCB7cG9zdGlkfSBNZW5kYXBhdGthbiBVc2VyIElEICAgICAgICAgICIsIGVuZD0nXHInKTt0aW1lLnNsZWVwKDMuNikNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDENCiAgICAgICAgZXhjZXB0IChLZXlib2FyZEludGVycnVwdCk6DQogICAgICAgICAgICBDb25zb2xlKCkucHJpbnQoZiJbYm9sZCBibHVlXSAgIOKVsOKUgD5bYm9sZCByZWRdIEludGVydXBzaSBLZXlib2FyZCEgICAgICAgICAgIiwgZW5kPSdccicpO3RpbWUuc2xlZXAoMy42KQ0KICAgICAgICAgICAgcmV0dXJuIDINCiMjIyBDUkFDSyAjIyMNCmNsYXNzIGNyYWNrOg0KDQogICAgZGVmIF9faW5pdF9fKHNlbGYpIC0+IE5vbmU6DQogICAgICAgIHNlbGYuY2hlY2twb2ludCwgc2VsZi5sb29waW5nLCBzZWxmLnN1Y2Nlc3MgPSBbXSwgMCwgW10NCiAgICAgICAgcGFzcw0KICAgICMjIyBHRU5FUkFURSBQQVNTV09SRCAjIyMNCiAgICBkZWYgZ2VuZXJhdGVfcGFzc3dvcmQoc2VsZiwgbmFtZSk6DQogICAgICAgIHNlbGYucGFzc3dvcmQgPSBbXQ0KICAgICAgICBmb3IgbmFtYSBpbiBuYW1lLnNwbGl0KCcgJyk6DQogICAgICAgICAgICBpZiBsZW4obmFtZSkgPD0gNToNCiAgICAgICAgICAgICAgICBpZiBsZW4obmFtYSkgPCAzOg0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIHNlbGYucGFzc3dvcmQuYXBwZW5kKG5hbWEgKyAnMTIzJykNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYXNzd29yZC5hcHBlbmQobmFtYSArICcxMjM0JykNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYXNzd29yZC5hcHBlbmQobmFtYSArICcxMjM0NScpDQogICAgICAgICAgICAgICAgICAgIHNlbGYucGFzc3dvcmQuYXBwZW5kKG5hbWEgKyAnMTIzNDU2JykNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgaWYgbGVuKG5hbWEpIDwgMzoNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYXNzd29yZC5hcHBlbmQobmFtZSkNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBzZWxmLnBhc3N3b3JkLmFwcGVuZChuYW1lKQ0KICAgICAgICAgICAgICAgICAgICBzZWxmLnBhc3N3b3JkLmFwcGVuZChuYW1hICsgJzEyMycpDQogICAgICAgICAgICAgICAgICAgIHNlbGYucGFzc3dvcmQuYXBwZW5kKG5hbWEgKyAnMTIzNCcpDQogICAgICAgICAgICAgICAgICAgIHNlbGYucGFzc3dvcmQuYXBwZW5kKG5hbWEgKyAnMTIzNDUnKQ0KICAgICAgICAgICAgICAgICAgICBzZWxmLnBhc3N3b3JkLmFwcGVuZChuYW1hICsgJzEyMzQ1NicpDQogICAgICAgIHNlbGYucGFzc3dvcmRfID0gW10NCiAgICAgICAgZm9yIHogaW4gc2VsZi5wYXNzd29yZDoNCiAgICAgICAgICAgIGlmIHN0cih6KSBpbiBzdHIoc2VsZi5wYXNzd29yZF8pOg0KICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIHNlbGYucGFzc3dvcmRfLmFwcGVuZCh6KQ0KICAgICAgICByZXR1cm4gc2VsZi5wYXNzd29yZF8NCiAgICAjIyMgT1BFTiBMSVNUIERVTVAgIyMjDQogICAgZGVmIG9wZW5fbGlzdChzZWxmKToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgQ29uc29sZShzdHlsZT0iYm9sZCBibHVlIikucHJpbnQoUGFuZWwoIiIiW2JvbGQgd2hpdGVdSGFzaWwgQ3JhY2tbYm9sZCBncmVlbl0gT2sgW2JvbGQgd2hpdGVdIFRlcnNpbXBhbiBEaSA6W2JvbGQgZ3JlZW5dIFJlc3VsdHMvT2sudHh0DQpbYm9sZCB3aGl0ZV1IYXNpbCBDcmFja1tib2xkIHllbGxvd10gQ3AgW2JvbGQgd2hpdGVdIFRlcnNpbXBhbiBEaSA6W2JvbGQgeWVsbG93XSBSZXN1bHRzL0NwLnR4dCIiIiwgdGl0bGU9Iltib2xkIGdyZWVuXShIYXNpbCBDcmFjaykiKSkNCiAgICAgICAgICAgIHdpdGggVGhyZWFkUG9vbEV4ZWN1dG9yKG1heF93b3JrZXJzPTM1KSBhcyAoVik6DQogICAgICAgICAgICAgICAgZm9yIHogaW4gRHVtcDoNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5lbWFpbCwgc2VsZi5uYW1hID0gei5zcGxpdCgnfCcpWzBdLCB6LnNwbGl0KCd8JylbMV0NCiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYXNzd29yZCA9IHNlbGYuZ2VuZXJhdGVfcGFzc3dvcmQoc2VsZi5uYW1hKQ0KICAgICAgICAgICAgICAgICAgICBWLnN1Ym1pdChzZWxmLm1haW4sIER1bXAsIHNlbGYuZW1haWwsIHNlbGYucGFzc3dvcmQpDQogICAgICAgICAgICBDb25zb2xlKCkucHJpbnQoIlxyW2JvbGQgd2hpdGVdW1tib2xkIHB1cnBsZV1TZWxlc2FpW2JvbGQgd2hpdGVdXSAgICAgICAgICAgICAgICAgICAgICAgICAgICIpO2V4aXQoKQ0KICAgICAgICBleGNlcHQ6ZXhpdCgpDQogICAgIyMjIE1BSU4gIyMjDQogICAgZGVmIG1haW4oc2VsZiwgdG90YWwsIGVtYWlsLCBwYXNzd29yZCk6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGZvciBwd3MgaW4gcGFzc3dvcmQ6DQogICAgICAgICAgICAgICAgc2VsZi51c2VyYWdlbnQgPSBzZWxmLnJlYWxtZV91c2VyYWdlbnQodG90YWwgPSAxKQ0KICAgICAgICAgICAgICAgIHdpdGggcmVxdWVzdHMuU2Vzc2lvbigpIGFzIHI6DQogICAgICAgICAgICAgICAgICAgIHIuaGVhZGVycy51cGRhdGUoew0KICAgICAgICAgICAgICAgICAgICAgICAgJ2Nvbm5lY3Rpb24nOiAna2VlcC1hbGl2ZScsDQogICAgICAgICAgICAgICAgICAgICAgICAnYWNjZXB0LWxhbmd1YWdlJzogJ2lkLGVuLVVTO3E9MC45LGVuO3E9MC44JywNCiAgICAgICAgICAgICAgICAgICAgICAgICdzZWMtZmV0Y2gtbW9kZSc6ICduYXZpZ2F0ZScsDQogICAgICAgICAgICAgICAgICAgICAgICAnYWNjZXB0JzogJ3RleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL2F2aWYsaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOScsDQogICAgICAgICAgICAgICAgICAgICAgICAnc2VjLWZldGNoLXNlc3QnOiAnZG9jdW1lbnQnLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ3NlYy1mZXRjaC1zaXRlJzogJ25vbmUnLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ2NhY2hlLWNvbnRyb2wnOiAnbWF4LWFnZT0wJywNCiAgICAgICAgICAgICAgICAgICAgICAgICdzZWMtZmV0Y2gtdXNlcic6ICc/MScsDQogICAgICAgICAgICAgICAgICAgICAgICAndXBncmFkZS1pbnNlY3VyZS1yZXF1ZXN0cyc6ICcxJywNCiAgICAgICAgICAgICAgICAgICAgICAgICdob3N0JzogJ20uYWxwaGEuZmFjZWJvb2suY29tJywNCiAgICAgICAgICAgICAgICAgICAgICAgICd1c2VyLWFnZW50Jzogc2VsZi51c2VyYWdlbnQNCiAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSByLmdldCgnaHR0cHM6Ly9tLmFscGhhLmZhY2Vib29rLmNvbS9sb2dpbi5waHA/JykudGV4dA0KICAgICAgICAgICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmphem9lc3QgPSByZS5zZWFyY2goJ25hbWU9Imphem9lc3QiIHZhbHVlPSIoXGQrKSInLCBzdHIocmVzcG9uc2UpKS5ncm91cCgxKQ0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5tX3RzID0gcmUuc2VhcmNoKCduYW1lPSJtX3RzIiB2YWx1ZT0iKC4qPykiJywgc3RyKHJlc3BvbnNlKSkuZ3JvdXAoMSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubGkgPSByZS5zZWFyY2goJ25hbWU9ImxpIiB2YWx1ZT0iKC4qPykiJywgc3RyKHJlc3BvbnNlKSkuZ3JvdXAoMSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZmJfZHRzZyA9IHJlLnNlYXJjaCgneyJkdHNnIjp7InRva2VuIjoiKC4qPykiJywgc3RyKHJlc3BvbnNlKSkuZ3JvdXAoMSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubHNkID0gcmUuc2VhcmNoKCduYW1lPSJsc2QiIHZhbHVlPSIoLio/KSInLCBzdHIocmVzcG9uc2UpKS5ncm91cCgxKQ0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fX2EgPSByZS5zZWFyY2goJyJlbmNyeXB0ZWQiOiIoLio/KSInLCBzdHIocmVzcG9uc2UpKS5ncm91cCgxKQ0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fX3NwaW5fdCA9IHJlLnNlYXJjaCgnIl9fc3Bpbl90IjooXGQrKSwnLCBzdHIocmVzcG9uc2UpKS5ncm91cCgxKQ0KICAgICAgICAgICAgICAgICAgICBleGNlcHQgKEF0dHJpYnV0ZUVycm9yKSBhcyBlOg0KICAgICAgICAgICAgICAgICAgICAgICAgQ29uc29sZSgpLnByaW50KCJbYm9sZCBibHVlXSAgIOKVsOKUgD5bYm9sZCByZWRdIEdhZ2FsLi4uICAgICAgICAgICAgICAgICAgIiwgZW5kPSdccicpO3RpbWUuc2xlZXAoMi4wKTtjb250aW51ZQ0KICAgICAgICAgICAgICAgICAgICBkYXRhID0gew0KICAgICAgICAgICAgICAgICAgICAgICAgJ21fdHMnOiBzZWxmLm1fdHMsDQogICAgICAgICAgICAgICAgICAgICAgICAnbGknOiBzZWxmLmxpLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ3RyeV9udW1iZXInOiAwLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ3VucmVjb2duaXplZF90cmllcyc6IDAsDQogICAgICAgICAgICAgICAgICAgICAgICAnZW1haWwnOiBlbWFpbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICdwcmVmaWxsX2NvbnRhY3RfcG9pbnQnOiBlbWFpbCwNCiAgICAgICAgICAgICAgICAgICAgICAgICdwcmVmaWxsX3NvdXJjZSc6ICdicm93c2VyX2Ryb3Bkb3duJywNCiAgICAgICAgICAgICAgICAgICAgICAgICdwcmVmaWxsX3R5cGUnOiAncGFzc3dvcmQnLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ2ZpcnN0X3ByZWZpbGxfc291cmNlJzogJ2Jyb3dzZXJfZHJvcGRvd24nLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ2ZpcnN0X3ByZWZpbGxfdHlwZSc6ICdjb250YWN0X3BvaW50JywNCiAgICAgICAgICAgICAgICAgICAgICAgICdoYWRfY3BfcHJlZmlsbGVkJzogVHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICdoYWRfcGFzc3dvcmRfcHJlZmlsbGVkJzogVHJ1ZSwNCiAgICAgICAgICAgICAgICAgICAgICAgICdpc19zbWFydF9sb2NrJzogRmFsc2UsDQogICAgICAgICAgICAgICAgICAgICAgICAnYmlfeHJ3aCc6IDAsDQogICAgICAgICAgICAgICAgICAgICAgICAnZW5jcGFzcyc6ICcjUFdEX0JST1dTRVI6MDp7fTp7fScuZm9ybWF0KHNlbGYuX19zcGluX3QsIHB3cyksDQogICAgICAgICAgICAgICAgICAgICAgICAnZmJfZHRzZyc6IHNlbGYuZmJfZHRzZywNCiAgICAgICAgICAgICAgICAgICAgICAgICdqYXpvZXN0Jzogc2VsZi5qYXpvZXN0LA0KICAgICAgICAgICAgICAgICAgICAgICAgJ2xzZCc6IHNlbGYubHNkLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ19fZHluJzogJycsDQogICAgICAgICAgICAgICAgICAgICAgICAnX19jc3InOiAnJywNCiAgICAgICAgICAgICAgICAgICAgICAgICdfX3JlcSc6IHJhbmRvbS5jaG9pY2UoWycxJywnMicsJzMnLCc0JywnNSddKSwNCiAgICAgICAgICAgICAgICAgICAgICAgICdfX2EnOiBzZWxmLl9fYSwNCiAgICAgICAgICAgICAgICAgICAgICAgICdfX3VzZXInOiAwDQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgci5oZWFkZXJzLnVwZGF0ZSh7DQogICAgICAgICAgICAgICAgICAgICAgICAnY29va2llJzogKCI7ICIuam9pbihbc3RyKHgpKyI9IitzdHIoeSkgZm9yIHgseSBpbiByLmNvb2tpZXMuZ2V0X2RpY3QoKS5pdGVtcygpXSkpLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ3NlYy1mZXRjaC1zaXRlJzogJ3NhbWUtb3JpZ2luJywNCiAgICAgICAgICAgICAgICAgICAgICAgICdvcmlnaW4nOiAnaHR0cHM6Ly9tLmFscGhhLmZhY2Vib29rLmNvbScsDQogICAgICAgICAgICAgICAgICAgICAgICAnYWNjZXB0JzogJyovKicsDQogICAgICAgICAgICAgICAgICAgICAgICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsDQogICAgICAgICAgICAgICAgICAgICAgICAneC1mYi1sc2QnOiBzZWxmLmxzZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICdyZWZlcmVyJzogJ2h0dHBzOi8vbS5hbHBoYS5mYWNlYm9vay5jb20vbG9naW4ucGhwPycsDQogICAgICAgICAgICAgICAgICAgICAgICAnY29udGVudC1sZW5ndGgnOiBzdHIobGVuKCgiJiIpLmpvaW4oWyAiJXM9JXMiICUgKHgsIHkpIGZvciB4LCB5IGluIGRhdGEuaXRlbXMoKSBdKSkpDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlMiA9IHIucG9zdCgnaHR0cHM6Ly9tLmFscGhhLmZhY2Vib29rLmNvbS9sb2dpbi9kZXZpY2UtYmFzZWQvbG9naW4vYXN5bmMvP3JlZnNyYz1kZXByZWNhdGVkJmx3dj0xMDAnLCBkYXRhID0gZGF0YSwgYWxsb3dfcmVkaXJlY3RzID0gVHJ1ZSkNCiAgICAgICAgICAgICAgICAgICAgI29wZW4oJ1Jlc3BvbnNlLnR4dCcsICdhKycpLndyaXRlKGYne2VtYWlsfXx7cHdzfXx7ci5jb29raWVzLmdldF9kaWN0KCl9XG4nKQ0KICAgICAgICAgICAgICAgICAgICBpZiAnY191c2VyJyBpbiByLmNvb2tpZXMuZ2V0X2RpY3QoKS5rZXlzKCk6DQogICAgICAgICAgICAgICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jb29raWUgPSAoIjsiLmpvaW4oW3N0cih4KSsiPSIrc3RyKHkpIGZvciB4LHkgaW4gci5jb29raWVzLmdldF9kaWN0KCkuaXRlbXMoKV0pKQ0KICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0OnBhc3MNCiAgICAgICAgICAgICAgICAgICAgICAgIHRyZWUgPSBUcmVlKCJccltib2xkIGJsdWVdTE9HSU4gQkVSSEFTSUwgICAgICAgICAgICAgICAgICAgICAiLCBzdHlsZSA9ICJib2xkIHdoaXRlIikNCiAgICAgICAgICAgICAgICAgICAgICAgIHRyZWUuYWRkKGYiW2JvbGQgZ3JlZW5dVVNFUiBJRCA6IHtlbWFpbH0iKS5hZGQoZiJbYm9sZCBncmVlbl1QYXNzd29yZCA6IHtwd3N9Iiwgc3R5bGUgPSAiYm9sZCB3aGl0ZSIpDQogICAgICAgICAgICAgICAgICAgICAgICB0cmVlLmFkZChmIltib2xkIHB1cnBsZV1DT09LSUUgOiB7c2VsZi5jb29raWV9Iiwgc3R5bGUgPSAiYm9sZCB3aGl0ZSIpDQogICAgICAgICAgICAgICAgICAgICAgICBwcmludCh0cmVlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zdWNjZXNzLmFwcGVuZChmJ3tlbWFpbH18e3B3c318e3NlbGYuY29va2llfScpDQogICAgICAgICAgICAgICAgICAgICAgICBvcGVuKCdSZXN1bHRzL09rLnR4dCcsICdhKycpLndyaXRlKGYne2VtYWlsfXx7cHdzfXx7c2VsZi5jb29raWV9XG4nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgICAgICAgZWxpZiAnY2hlY2twb2ludCcgaW4gci5jb29raWVzLmdldF9kaWN0KCkua2V5cygpOg0KICAgICAgICAgICAgICAgICAgICAgICAgdHJlZSA9IFRyZWUoIlxyW2JvbGQgeWVsbG93XUxPR0lOIEdBR0FMICAgICAgICAgICAgICAgICAgICAgICIsIHN0eWxlID0gImJvbGQgd2hpdGUiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdHJlZS5hZGQoZiJbYm9sZCB5ZWxsb3ddVVNFUiBJRCA6IHtlbWFpbH0iKS5hZGQoZiJbYm9sZCB5ZWxsb3ddUGFzc3dvcmQgOiB7cHdzfSIsIHN0eWxlID0gImJvbGQgd2hpdGUiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgdHJlZS5hZGQoZiJbYm9sZCBwdXJwbGVdVVNFUkFHRU5UIDoge3NlbGYudXNlcmFnZW50fSIsIHN0eWxlID0gImJvbGQgd2hpdGUiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQodHJlZSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2hlY2twb2ludC5hcHBlbmQoZid7ZW1haWx9fHtwd3N9fHtzZWxmLnVzZXJhZ2VudH0nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgb3BlbignUmVzdWx0cy9DcC50eHQnLCAnYSsnKS53cml0ZShmJ3tlbWFpbH18e3B3c318e3NlbGYudXNlcmFnZW50fVxuJykNCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgc2VsZi5sb29waW5nICs9IDENCiAgICAgICAgICAgIENvbnNvbGUoKS5wcmludChmIltib2xkIGJsdWVdICAg4pWw4pSAPltib2xkIHdoaXRlXSBwcm9zZXMge3N0cihsZW4oRHVtcCkpffCflZx7c2VsZi5sb29waW5nfSBPSzotW2JvbGQgZ3JlZW5de2xlbihzZWxmLnN1Y2Nlc3MpfVtib2xkIHdoaXRlXSBDUDotW2JvbGQgeWVsbG93XXtsZW4oc2VsZi5jaGVja3BvaW50KX1bYm9sZCB3aGl0ZV0gICAgICAgICAgICAgICIsIGVuZD0nXHInKQ0KICAgICAgICBleGNlcHQgKHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yLCByZXF1ZXN0cy5leGNlcHRpb25zLkNodW5rZWRFbmNvZGluZ0Vycm9yKToNCiAgICAgICAgICAgIENvbnNvbGUoKS5wcmludCgiW2JvbGQgYmx1ZV0gICDilbDilIA+W2JvbGQgcmVkXSBpbnRlcm5ldCBiZXJtYXNhbGFoISAgICAgICAgICAgICAgICAgICAgIiwgZW5kPSdccicpO3RpbWUuc2xlZXAoNy45KTtzZWxmLm1haW4odG90YWwsIGVtYWlsLCBwYXNzd29yZCkNCiAgICAjIyMgUkVBTE1FIFVTRVJBR0VOVCAjIyMNCiAgICBkZWYgcmVhbG1lX3VzZXJhZ2VudChzZWxmLCB0b3RhbCk6DQogICAgICAgIGZvciBfIGluIHJhbmdlKHRvdGFsKToNCiAgICAgICAgICAgIHNlbGYuYnJvd3Nlcl92ZXJzaW9uID0gKGYne3JhbmRvbS5yYW5kcmFuZ2UoODUsIDEwNSl9LjAue3JhbmRvbS5yYW5kcmFuZ2UoNDIwMCwgNDkwMCl9LntyYW5kb20ucmFuZHJhbmdlKDQwLCAxNTApfScpDQogICAgICAgICAgICBzZWxmLmJ1aWxkID0gKCcnLmpvaW4ocmFuZG9tLmNob2ljZSgnMTIzNDU2Nzg5MEFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaMTIzNDU2Nzg5MCcpIGZvciB5IGluIHJhbmdlKDYpKSkNCiAgICAgICAgICAgIHNlbGYuYW5kcm9pZF92ZXJzaW9uID0gcmFuZG9tLmNob2ljZShbJzEwJywgJzkuMCcsICc4LjEuMCddKQ0KICAgICAgICAgICAgc2VsZi5hbmRyb2lkX21vZGVsID0gcmFuZG9tLmNob2ljZShbJ0xlbm92byBMNzgwMTEnXSkNCiAgICAgICAgICAgIHNlbGYudXNlcmFnZW50ID0gcmFuZG9tLmNob2ljZShbJ01vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA4LjEuMDsgTGVub3ZvIEw3ODAxMSkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzg2LjAuNDI0MC4xOTggTW9iaWxlIFNhZmFyaS81MzcuMzYnLmZvcm1hdChzZWxmLmFuZHJvaWRfdmVyc2lvbiwgc2VsZi5hbmRyb2lkX21vZGVsLCBzZWxmLmJ1aWxkLCBzZWxmLmJyb3dzZXJfdmVyc2lvbildKQ0KICAgICAgICByZXR1cm4gc2VsZi51c2VyYWdlbnQNCg0KaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoNCiAgICB0cnk6DQogICAgICAgIGxlc2Vuc2koKQ0KICAgICAgICBvcy5zeXN0ZW0oJ2dpdCBwdWxsJyk7ZGFmdGFyX21lbnUoKQ0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgQ29uc29sZShzdHlsZT0iYm9sZCBibHVlIikucHJpbnQoUGFuZWwoZiJbaXRhbGljIHJlZF17c3RyKGUpLnRpdGxlKCl9IiwgdGl0bGU9Iltib2xkIHJlZF0oRXJyb3IpIikpO2V4aXQoKQ=='))